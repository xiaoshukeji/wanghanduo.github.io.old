<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from code.visualstudio.com/api/extension-guides/webview by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 04 Jan 2023 11:22:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="hNs7DXrTySP_X-0P_AC0WulAXvUwgSXEmgfcO2r79dw" />

  <!-- Twitter and Facebook OpenGraph Metadata-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@code" />

  <meta name="keywords" content="vscode API" />

<meta name="description" content="Use the Webview API to create fully customizable views within Visual Studio Code." />

<meta name="ms.prod" content="vs-code" />
<meta name="ms.TOCTitle" content="Webview API" />
<meta name="ms.ContentId" content="adddd33e-2de6-4146-853b-34d0d7e6c1f1" />
<meta name="ms.topic" content="conceptual" />
<meta name="ms.date" content="12/7/2022" />
<!-- Twitter and Facebook OpenGraph Metadata-->
<meta name="twitter:card" content="summary_large_image" />
<meta property="og:url" content="webview.html" />

<meta property="og:description" content="Use the Webview API to create fully customizable views within Visual Studio Code." />

<meta property="og:type" content="article" />
<meta property="og:title" content="Webview API" />
<meta property="og:image" content="../../opengraphimg/opengraph-docs.png" />


  <link rel="shortcut icon" href="../../favicon.ico" sizes="128x128" />
  <link rel="apple-touch-icon" href="../../apple-touch-icon.png">

  <title>Webview API | Visual Studio Code Extension
API</title>

  <link rel="stylesheet" href="../../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../dist/style.css">

  <script type="text/javascript" src="../../../js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script>
  <script>
  window.appInsights = new oneDS.ApplicationInsights();
  window.appInsights.initialize({
    instrumentationKey: "1a3eb3104447440391ad5f2a6ee06a0a-62879566-bc58-4741-9650-302bf2af703f-7103",
    webAnalyticsConfiguration:{ // Web Analytics Plugin configuration
        urlCollectQuery:true, 
        autoCapture: {
          scroll: true,
          pageView: true,
          onLoad: true,
          onUnload: true,
          click: true,
          resize: true,
          jsError: true
        }
    }
  }, []);
  </script>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../www.google-analytics.com/analytics.js','ga');
  </script>  
  <link rel="alternate" type="application/atom+xml" title="RSS Feed for code.visualstudio.com" href="../../feed.xml" />
</head>

<body>
  <!-- EU Cookie Compliance JS -->
  <script src="../../../wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>

  <div id="main">
          <div class="navbar-fixed-container">
              <div class="navbar navbar-inverse navbar-fixed-top ">
                  <div id='cookie-banner'></div>        <nav role="navigation" aria-label="Top Level">
                      <div class="container">
                          <div class="nav navbar-header">
                              <a role="button" id="skip-to-content" class="link-button" href="#main-content">Skip to content<i>&nbsp;</i><span class="glyphicon glyphicon-menu-down"></span></a>
                              <a class="navbar-brand" id="navbar-brand" href="../../index.html">Visual Studio Code</a>
                              <button type="button" class="navbar-toggle" role="navigation" data-toggle="collapse" data-target=".navbar-collapse" aria-label="Toggle Navigation Menu">
                                  <span class="icon-bar"></span>
                                  <span class="icon-bar"></span>
                                  <span class="icon-bar"></span>
                              </button>
                          </div>
                          <div class="navbar-collapse collapse" role="navigation">
                              <ul class="nav navbar-nav navbar-left">
                                  <li ><a id="nav-docs" href="../../docs.html">Docs</a></li>
                                  <li ><a id="nav-updates" href="../../updates/v1_74.html">Updates</a></li>
                                  <li ><a id="nav-blogs" href="../../blogs.html">Blog</a></li>
                                  <li class="active" ><a id="nav-extend" href="../../api.html">API</a></li>
                                  <li><a href="https://marketplace.visualstudio.com/VSCode" target="_blank" id="nav-extensions">Extensions</a></li>
                                  <li ><a id="nav-faqs" href="../../docs/supporting/faq.html">FAQ</a></li>
                                  <li ><a id="nav-learn" href="../../learn.html">Learn</a></li>
                                  <li class='search visible-xs visible-sm'
                                      ><a href="../../Search.html">Search</a></li>
                              </ul>
          
                              <ul class="nav navbar-nav navbar-right" role="presentation">
                                  <!-- Floating search icon -->
                                  <li>
                                      <a href="../../Search.html" title="Search" class="btn search-btn" id="nav-search">
                                          <img class="search-icon" src="../../assets/icons/search.svg" width="16px" height="16px" alt="Search"/>
                                          <img class="search-icon-inverted" src="../../assets/icons/search_dark.svg" width="16px" height="16px" alt="Search" />
                                      </a>
                                  </li>
                                  <!-- Actual search icon -->
                                  <li class="search" role="presentation">
                                      <form class="nav-search search-form" role="search" aria-label="Search">
                                          <div class="input-group" role="presentation">
                                              <input type="text" name="q" class="search-box form-control" placeholder="Search Docs" aria-label="Search text"/>
                                              <span class="input-group-btn">
                                                  <button tabindex="0" class="btn" type="submit" aria-label="Search">
                                                          <img class="search-icon" src="../../assets/icons/search.svg" width="16px" height="16px" alt="Search" />
                                                          <img class="search-icon-inverted" src="../../assets/icons/search_dark.svg" width="16px" height="16px" alt="Search" />
                                                  </button>
                                              </span>
                                          </div>
                                      </form>                        </li>
                                  <!-- this was hiden in the home and download page, keeping it for now -->
                                  <li><a class="link-button" href="../../Download.html" id="nav-download">
                                      <img class="download-icon" src="../../assets/icons/download.svg" width="16px" height="16px" alt="Download VS Code"/>
                                      <img class="download-icon-inverted" src="../../assets/icons/download-black.svg" width="16px" height="16px" alt="Download VS Code" />
                                      <span>Download</span>
                                  </a></li>
                              </ul>
                          </div>
                      </div>
                  </nav>
              </div>
          </div>          <div class="updates-banner  ">
              <div class="container">
                  <p class="message"><a href="../../updates/v1_74.html" id="banner-link-updates">Version 1.74</a> is now available! Read about the new features and fixes from November.</p> 
              </div>
              <div tabindex="0" role="button" title="Dismiss this update" class="dismiss-btn" id="banner-dismiss-btn"><span class="sr-only">Dismiss this update</span><span aria-hidden="true" class="glyph-icon"></span></div>
          </div>      <div role="main" id="main-content">
        <div class="container body-content docs">
	<div class="row">
		<div class="col-md-2 docs-navbar-container">
			<nav id="docs-navbar" class="docs-nav visible-md visible-lg">
			  <ul class="nav" id="main-nav">
			  <li >
			    <a class="docs-home" href="../../api.html" >Overview</a>
			  </li>
			  
			<li class="panel collapsed">
			  <a class="area" role="button" href="#get-started-articles" data-parent="#main-nav" data-toggle="collapse">Get Started</a>
			  <ul id="get-started-articles" class="collapse ">
			
			    <li >
			      <a href="../get-started/your-first-extension.html" >Your First Extension</a>
			    </li>
			      
			    <li >
			      <a href="../get-started/extension-anatomy.html" >Extension Anatomy</a>
			    </li>
			      
			    <li >
			      <a href="../get-started/wrapping-up.html" >Wrapping Up</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#extension-capabilities-articles" data-parent="#main-nav" data-toggle="collapse">Extension Capabilities</a>
			  <ul id="extension-capabilities-articles" class="collapse ">
			
			    <li >
			      <a href="../extension-capabilities/overview.html" >Overview</a>
			    </li>
			      
			    <li >
			      <a href="../extension-capabilities/common-capabilities.html" >Common Capabilities</a>
			    </li>
			      
			    <li >
			      <a href="../extension-capabilities/theming.html" >Theming</a>
			    </li>
			      
			    <li >
			      <a href="../extension-capabilities/extending-workbench.html" >Extending Workbench</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel active expanded">
			  <a class="area" role="button" href="#extension-guides-articles" data-parent="#main-nav" data-toggle="collapse">Extension Guides</a>
			  <ul id="extension-guides-articles" class="collapse in">
			
			    <li >
			      <a href="overview.html" >Overview</a>
			    </li>
			      
			    <li >
			      <a href="command.html" >Command</a>
			    </li>
			      
			    <li >
			      <a href="color-theme.html" >Color Theme</a>
			    </li>
			      
			    <li >
			      <a href="file-icon-theme.html" >File Icon Theme</a>
			    </li>
			      
			    <li >
			      <a href="product-icon-theme.html" >Product Icon Theme</a>
			    </li>
			      
			    <li >
			      <a href="tree-view.html" >Tree View</a>
			    </li>
			      
			    <li class="active">
			      <a href="webview.html" aria-label="Current Page: Webview">Webview</a>
			    </li>
			      
			    <li >
			      <a href="notebook.html" >Notebook</a>
			    </li>
			      
			    <li >
			      <a href="custom-editors.html" >Custom Editors</a>
			    </li>
			      
			    <li >
			      <a href="virtual-documents.html" >Virtual Documents</a>
			    </li>
			      
			    <li >
			      <a href="virtual-workspaces.html" >Virtual Workspaces</a>
			    </li>
			      
			    <li >
			      <a href="web-extensions.html" >Web Extensions</a>
			    </li>
			      
			    <li >
			      <a href="workspace-trust.html" >Workspace Trust</a>
			    </li>
			      
			    <li >
			      <a href="task-provider.html" >Task Provider</a>
			    </li>
			      
			    <li >
			      <a href="scm-provider.html" >Source Control</a>
			    </li>
			      
			    <li >
			      <a href="debugger-extension.html" >Debugger Extension</a>
			    </li>
			      
			    <li >
			      <a href="markdown-extension.html" >Markdown Extension</a>
			    </li>
			      
			    <li >
			      <a href="testing.html" >Test Extension</a>
			    </li>
			      
			    <li >
			      <a href="custom-data-extension.html" >Custom Data Extension</a>
			    </li>
			      
			    <li >
			      <a href="telemetry.html" >Telemetry</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#ux-guidelines-articles" data-parent="#main-nav" data-toggle="collapse">UX Guidelines</a>
			  <ul id="ux-guidelines-articles" class="collapse ">
			
			    <li >
			      <a href="../ux-guidelines/overview.html" >Overview</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/activity-bar.html" >Activity Bar</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/sidebars.html" >Sidebars</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/panel.html" >Panel</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/status-bar.html" >Status Bar</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/views.html" >Views</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/editor-actions.html" >Editor Actions</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/quick-picks.html" >Quick Picks</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/command-palette.html" >Command Palette</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/notifications.html" >Notifications</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/webviews.html" >Webviews</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/context-menus.html" >Context Menus</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/walkthroughs.html" >Walkthroughs</a>
			    </li>
			      
			    <li >
			      <a href="../ux-guidelines/settings.html" >Settings</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#language-extensions-articles" data-parent="#main-nav" data-toggle="collapse">Language Extensions</a>
			  <ul id="language-extensions-articles" class="collapse ">
			
			    <li >
			      <a href="../language-extensions/overview.html" >Overview</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/syntax-highlight-guide.html" >Syntax Highlight Guide</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/semantic-highlight-guide.html" >Semantic Highlight Guide</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/snippet-guide.html" >Snippet Guide</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/language-configuration-guide.html" >Language Configuration Guide</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/programmatic-language-features.html" >Programmatic Language Features</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/language-server-extension-guide.html" >Language Server Extension Guide</a>
			    </li>
			      
			    <li >
			      <a href="../language-extensions/embedded-languages.html" >Embedded Languages</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#working-with-extensions-articles" data-parent="#main-nav" data-toggle="collapse">Testing and Publishing</a>
			  <ul id="working-with-extensions-articles" class="collapse ">
			
			    <li >
			      <a href="../working-with-extensions/testing-extension.html" >Testing Extensions</a>
			    </li>
			      
			    <li >
			      <a href="../working-with-extensions/publishing-extension.html" >Publishing Extensions</a>
			    </li>
			      
			    <li >
			      <a href="../working-with-extensions/bundling-extension.html" >Bundling Extensions</a>
			    </li>
			      
			    <li >
			      <a href="../working-with-extensions/continuous-integration.html" >Continuous Integration</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#advanced-topics-articles" data-parent="#main-nav" data-toggle="collapse">Advanced Topics</a>
			  <ul id="advanced-topics-articles" class="collapse ">
			
			    <li >
			      <a href="../advanced-topics/extension-host.html" >Extension Host</a>
			    </li>
			      
			    <li >
			      <a href="../advanced-topics/remote-extensions.html" >Remote Development and Codespaces</a>
			    </li>
			      
			    <li >
			      <a href="../advanced-topics/using-proposed-api.html" >Using Proposed API</a>
			    </li>
			      
			    <li >
			      <a href="../advanced-topics/tslint-eslint-migration.html" >Migrate from TSLint to ESLint</a>
			    </li>
			      
			    <li >
			      <a href="../advanced-topics/python-extension-template.html" >Python Extension Template</a>
			    </li>
			      
			  </ul>
			</li>
			    
			<li class="panel collapsed">
			  <a class="area" role="button" href="#references-articles" data-parent="#main-nav" data-toggle="collapse">References</a>
			  <ul id="references-articles" class="collapse ">
			
			    <li >
			      <a href="../references/vscode-api.html" >VS Code API </a>
			    </li>
			      
			    <li >
			      <a href="../references/contribution-points.html" >Contribution Points</a>
			    </li>
			      
			    <li >
			      <a href="../references/activation-events.html" >Activation Events</a>
			    </li>
			      
			    <li >
			      <a href="../references/extension-manifest.html" >Extension Manifest</a>
			    </li>
			      
			    <li >
			      <a href="../references/commands.html" >Built-in Commands</a>
			    </li>
			      
			    <li >
			      <a href="../references/when-clause-contexts.html" >When clause contexts</a>
			    </li>
			      
			    <li >
			      <a href="../references/theme-color.html" >Theme Color</a>
			    </li>
			      
			    <li >
			      <a href="../references/icons-in-labels.html" >Product Icon Reference</a>
			    </li>
			      
			    <li >
			      <a href="../references/document-selector.html" >Document Selector</a>
			    </li>
			      
			  </ul>
			</li>
			    
			  </ul>
			</nav>
			
			<nav id="small-nav" aria-label="Topics" class="docs-nav hidden-md hidden-lg">
				<h4>Topics</h4>
				<select id="small-nav-dropdown" aria-label="topics">
			    <option value="/api" >Overview</option>
			
			  <optgroup label="Get Started">
			
			    <option value="/api/get-started/your-first-extension" >Your First Extension</option>
			    
			    <option value="/api/get-started/extension-anatomy" >Extension Anatomy</option>
			    
			    <option value="/api/get-started/wrapping-up" >Wrapping Up</option>
			    
			  </optgroup>
			  
			  <optgroup label="Extension Capabilities">
			
			    <option value="/api/extension-capabilities/overview" >Overview</option>
			    
			    <option value="/api/extension-capabilities/common-capabilities" >Common Capabilities</option>
			    
			    <option value="/api/extension-capabilities/theming" >Theming</option>
			    
			    <option value="/api/extension-capabilities/extending-workbench" >Extending Workbench</option>
			    
			  </optgroup>
			  
			  <optgroup label="Extension Guides">
			
			    <option value="/api/extension-guides/overview" >Overview</option>
			    
			    <option value="/api/extension-guides/command" >Command</option>
			    
			    <option value="/api/extension-guides/color-theme" >Color Theme</option>
			    
			    <option value="/api/extension-guides/file-icon-theme" >File Icon Theme</option>
			    
			    <option value="/api/extension-guides/product-icon-theme" >Product Icon Theme</option>
			    
			    <option value="/api/extension-guides/tree-view" >Tree View</option>
			    
			    <option value="/api/extension-guides/webview" selected>Webview</option>
			    
			    <option value="/api/extension-guides/notebook" >Notebook</option>
			    
			    <option value="/api/extension-guides/custom-editors" >Custom Editors</option>
			    
			    <option value="/api/extension-guides/virtual-documents" >Virtual Documents</option>
			    
			    <option value="/api/extension-guides/virtual-workspaces" >Virtual Workspaces</option>
			    
			    <option value="/api/extension-guides/web-extensions" >Web Extensions</option>
			    
			    <option value="/api/extension-guides/workspace-trust" >Workspace Trust</option>
			    
			    <option value="/api/extension-guides/task-provider" >Task Provider</option>
			    
			    <option value="/api/extension-guides/scm-provider" >Source Control</option>
			    
			    <option value="/api/extension-guides/debugger-extension" >Debugger Extension</option>
			    
			    <option value="/api/extension-guides/markdown-extension" >Markdown Extension</option>
			    
			    <option value="/api/extension-guides/testing" >Test Extension</option>
			    
			    <option value="/api/extension-guides/custom-data-extension" >Custom Data Extension</option>
			    
			    <option value="/api/extension-guides/telemetry" >Telemetry</option>
			    
			  </optgroup>
			  
			  <optgroup label="UX Guidelines">
			
			    <option value="/api/ux-guidelines/overview" >Overview</option>
			    
			    <option value="/api/ux-guidelines/activity-bar" >Activity Bar</option>
			    
			    <option value="/api/ux-guidelines/sidebars" >Sidebars</option>
			    
			    <option value="/api/ux-guidelines/panel" >Panel</option>
			    
			    <option value="/api/ux-guidelines/status-bar" >Status Bar</option>
			    
			    <option value="/api/ux-guidelines/views" >Views</option>
			    
			    <option value="/api/ux-guidelines/editor-actions" >Editor Actions</option>
			    
			    <option value="/api/ux-guidelines/quick-picks" >Quick Picks</option>
			    
			    <option value="/api/ux-guidelines/command-palette" >Command Palette</option>
			    
			    <option value="/api/ux-guidelines/notifications" >Notifications</option>
			    
			    <option value="/api/ux-guidelines/webviews" >Webviews</option>
			    
			    <option value="/api/ux-guidelines/context-menus" >Context Menus</option>
			    
			    <option value="/api/ux-guidelines/walkthroughs" >Walkthroughs</option>
			    
			    <option value="/api/ux-guidelines/settings" >Settings</option>
			    
			  </optgroup>
			  
			  <optgroup label="Language Extensions">
			
			    <option value="/api/language-extensions/overview" >Overview</option>
			    
			    <option value="/api/language-extensions/syntax-highlight-guide" >Syntax Highlight Guide</option>
			    
			    <option value="/api/language-extensions/semantic-highlight-guide" >Semantic Highlight Guide</option>
			    
			    <option value="/api/language-extensions/snippet-guide" >Snippet Guide</option>
			    
			    <option value="/api/language-extensions/language-configuration-guide" >Language Configuration Guide</option>
			    
			    <option value="/api/language-extensions/programmatic-language-features" >Programmatic Language Features</option>
			    
			    <option value="/api/language-extensions/language-server-extension-guide" >Language Server Extension Guide</option>
			    
			    <option value="/api/language-extensions/embedded-languages" >Embedded Languages</option>
			    
			  </optgroup>
			  
			  <optgroup label="Testing and Publishing">
			
			    <option value="/api/working-with-extensions/testing-extension" >Testing Extensions</option>
			    
			    <option value="/api/working-with-extensions/publishing-extension" >Publishing Extensions</option>
			    
			    <option value="/api/working-with-extensions/bundling-extension" >Bundling Extensions</option>
			    
			    <option value="/api/working-with-extensions/continuous-integration" >Continuous Integration</option>
			    
			  </optgroup>
			  
			  <optgroup label="Advanced Topics">
			
			    <option value="/api/advanced-topics/extension-host" >Extension Host</option>
			    
			    <option value="/api/advanced-topics/remote-extensions" >Remote Development and Codespaces</option>
			    
			    <option value="/api/advanced-topics/using-proposed-api" >Using Proposed API</option>
			    
			    <option value="/api/advanced-topics/tslint-eslint-migration" >Migrate from TSLint to ESLint</option>
			    
			    <option value="/api/advanced-topics/python-extension-template" >Python Extension Template</option>
			    
			  </optgroup>
			  
			  <optgroup label="References">
			
			    <option value="/api/references/vscode-api" >VS Code API </option>
			    
			    <option value="/api/references/contribution-points" >Contribution Points</option>
			    
			    <option value="/api/references/activation-events" >Activation Events</option>
			    
			    <option value="/api/references/extension-manifest" >Extension Manifest</option>
			    
			    <option value="/api/references/commands" >Built-in Commands</option>
			    
			    <option value="/api/references/when-clause-contexts" >When clause contexts</option>
			    
			    <option value="/api/references/theme-color" >Theme Color</option>
			    
			    <option value="/api/references/icons-in-labels" >Product Icon Reference</option>
			    
			    <option value="/api/references/document-selector" >Document Selector</option>
			    
			  </optgroup>
			  
				</select>
			</nav>		</div>
		<div class="col-sm-9 col-md-8 body">
			<div class="edit-github pull-right">
				<a href="https://vscode.dev/github/microsoft/vscode-docs/blob/main/api/extension-guides/webview.md"
					class="btn btn-default" title="Edit this document in vscode.dev">
					<span class="glyphicon glyphicon-pencil"></span>
					<span class="hidden-xs">Edit</span>
				</a>
			</div>
			<h1>Webview API</h1>
<p>The webview API allows extensions to create fully customizable views within Visual Studio Code. For example, the built-in Markdown extension uses webviews to render Markdown previews. Webviews can also be used to build complex user interfaces beyond what VS Code's native APIs support.</p>
<p>Think of a webview as an <code>iframe</code> within VS Code that your extension controls. A webview can render almost any HTML content in this frame, and it communicates with extensions using message passing. This freedom makes webviews incredibly powerful, and opens up a whole new range of extension possibilities.</p>
<p>Webviews are used in several VS Code APIs:</p>
<ul>
<li>With Webview Panels created using <code>createWebviewPanel</code>. In this case, Webview panels are shown in VS Code as distinct editors. This makes them useful for displaying custom UI and custom visualizations.</li>
<li>As the view for a <a href="custom-editors.html">custom editor</a>. Custom editors allow extensions to provide a custom UI for editing any file in the workspace. The custom editor API also lets your extension hook into editor events such as undo and redo, as well as file events such as save.</li>
<li>In <a href="../references/vscode-api.html#WebviewView">Webview views</a> that are rendered in the sidebar or panel areas. See the <a href="https://github.com/microsoft/vscode-extension-samples/tree/main/webview-view-sample" class="external-link" target="_blank">webview view sample extension</a> for more details.</li>
</ul>
<p>This page focuses on the basic webview panel API, although almost everything covered here applies to the webviews used in custom editors and webview views as well. Even if you are more interested in those APIs, we recommend reading through this page first to familiarize yourself with the webview basics.</p>
<h2 id="links" data-needslink="links">Links</h2>
<ul>
<li><a href="https://github.com/microsoft/vscode-extension-samples/blob/main/webview-sample/README.md" class="external-link" target="_blank">Webview sample</a></li>
<li><a href="custom-editors.html">Custom Editors documentation</a></li>
<li><a href="https://github.com/microsoft/vscode-extension-samples/tree/main/webview-view-sample" class="external-link" target="_blank">Webview View sample</a></li>
</ul>
<h3 id="vs-code-api-usage" data-needslink="vs-code-api-usage">VS Code API Usage</h3>
<ul>
<li><a href="../references/vscode-api.html#window.createWebviewPanel"><code>window.createWebviewPanel</code></a></li>
<li><a href="../references/vscode-api.html#window.registerWebviewPanelSerializer"><code>window.registerWebviewPanelSerializer</code></a></li>
</ul>
<h2 id="should-i-use-a-webview" data-needslink="should-i-use-a-webview">Should I use a webview?</h2>
<p>Webviews are pretty amazing, but they should also be used sparingly and only when VS Code's native API is inadequate. Webviews are resource heavy and run in a separate context from normal extensions. A poorly designed webview can also easily feel out of place within VS Code.</p>
<p>Before using a webview, please consider the following:</p>
<ul>
<li>
<p>Does this functionality really need to live within VS Code? Would it be better as a separate application or website?</p>
</li>
<li>
<p>Is a webview the only way to implement your feature? Can you use the regular VS Code APIs instead?</p>
</li>
<li>
<p>Will your webview add enough user value to justify its high resource cost?</p>
</li>
</ul>
<p>Remember: Just because you can do something with webviews, doesn't mean you should. However, if you are confident that you need to use webviews, then this document is here to help. Let's get started.</p>
<h2 id="webviews-api-basics" data-needslink="webviews-api-basics">Webviews API basics</h2>
<p>To explain the webview API, we are going to build a simple extension called <strong>Cat Coding</strong>. This extension will use a webview to show a gif of a cat writing some code (presumably in VS Code). As we work through the API, we'll continue adding functionality to the extension, including a counter that keeps track of how many lines of source code our cat has written and notifications that inform the user when the cat introduces a bug.</p>
<p>Here's the <code>package.json</code> for the first version of the <strong>Cat Coding</strong> extension. You can find the complete code for the example app <a href="https://github.com/microsoft/vscode-extension-samples/blob/main/webview-sample/README.md" class="external-link" target="_blank">here</a>. The first version of our extension <a href="../references/contribution-points.html#contributes.commands">contributes a command</a> called <code>catCoding.start</code>. When a user invokes this command, we will show a simple webview with our cat in it. Users will be able to invoke this command from the <strong>Command Palette</strong> as <strong>Cat Coding: Start new cat coding session</strong> or even create a keybinding for it if they are so inclined.</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;name&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;cat-coding&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;description&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Cat Coding&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;version&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;0.0.1&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;publisher&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;bierner&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;engines&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;vscode&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;^1.74.0&quot;</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;activationEvents&quot;</span><span style="color: #000000">: [],</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;main&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;./out/src/extension&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;contributes&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;commands&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">      {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;command&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;catCoding.start&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;title&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Start new cat coding session&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0451A5">&quot;category&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;Cat Coding&quot;</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    ]</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;scripts&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;vscode:prepublish&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;tsc -p ./&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;compile&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;tsc -watch -p ./&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;postinstall&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;node ./node_modules/vscode/bin/install&quot;</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;dependencies&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;vscode&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;*&quot;</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;devDependencies&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;@types/node&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;^9.4.6&quot;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;typescript&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;^2.8.3&quot;</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<blockquote>
<p><strong>Note</strong>: If your extension targets a VS Code version prior to 1.74, you must explicitly list <code>onCommand:catCoding.start</code> in <code>activationEvents</code>.</p>
</blockquote>
<p>Now let's implement the <code>catCoding.start</code> command. In our extension's main file, we register the <code>catCoding.start</code> command and use it to show a basic webview:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Create and show a new webview</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">, </span><span style="color: #008000">// Identifies the type of the webview. Used internally</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">, </span><span style="color: #008000">// Title of the panel displayed to the user</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">, </span><span style="color: #008000">// Editor column to show the new webview panel in.</span></span>
<span class="line"><span style="color: #000000">        {} </span><span style="color: #008000">// Webview options. More on these later.</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>The <code>vscode.window.createWebviewPanel</code> function creates and shows a webview in the editor. Here is what you see if you try running the <code>catCoding.start</code> command in its current state:</p>
<p><img src="../../assets/api/extension-guides/webview/basics-no_content.png" alt="An empty webview" loading="lazy"></p>
<p>Our command opens a new webview panel with the correct title, but with no content! To add our cat to new panel, we also need to set the HTML content of the webview using <code>webview.html</code>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Create and show panel</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// And set its HTML content</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>If you run the command again, now the webview looks like this:</p>
<p><img src="../../assets/api/extension-guides/webview/basics-html.png" alt="A webview with some HTML" loading="lazy"></p>
<p>Progress!</p>
<p><code>webview.html</code> should always be a complete HTML document. HTML fragments or malformed HTML may cause unexpected behavior.</p>
<h3 id="updating-webview-content" data-needslink="updating-webview-content">Updating webview content</h3>
<p><code>webview.html</code> can also update a webview's content after it has been created. Let's use this to make <strong>Cat Coding</strong> more dynamic by introducing a rotation of cats:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cats</span><span style="color: #000000"> = {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif&#39;</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">iteration</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">updateWebview</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cat</span><span style="color: #000000"> = </span><span style="color: #001080">iteration</span><span style="color: #000000">++ % </span><span style="color: #098658">2</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #000000"> : </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000"> = </span><span style="color: #001080">cat</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">cat</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Set initial content</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">updateWebview</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// And schedule updates to the content every second</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">setInterval</span><span style="color: #000000">(</span><span style="color: #001080">updateWebview</span><span style="color: #000000">, </span><span style="color: #098658">1000</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">cat</span><span style="color: #000000">: </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">cats</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;</span><span style="color: #0000FF">${</span><span style="color: #001080">cats</span><span style="color: #000000FF">[</span><span style="color: #001080">cat</span><span style="color: #000000FF">]</span><span style="color: #0000FF">}</span><span style="color: #A31515">&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/basics-update.gif" alt="Updating the webview content" loading="lazy"></p>
<p>Setting <code>webview.html</code> replaces the entire webview content, similar to reloading an iframe. This is important to remember once you start using scripts in a webview, since it means that setting <code>webview.html</code> also resets the script's state.</p>
<p>The example above also uses <code>webview.title</code> to change the title of the document displayed in the editor. Setting the title does not cause the webview to be reloaded.</p>
<h3 id="lifecycle" data-needslink="lifecycle">Lifecycle</h3>
<p>Webview panels are owned by the extension that creates them. The extension must hold onto the webview returned from <code>createWebviewPanel</code>. If your extension loses this reference, it cannot regain access to that webview again, even though the webview will continue to show in VS Code.</p>
<p>As with text editors, a user can also close a webview panel at any time. When a webview panel is closed by the user, the webview itself is destroyed. Attempting to use a destroyed webview throws an exception. This means that the example above using <code>setInterval</code> actually has an important bug: if the user closes the panel, <code>setInterval</code> will continue to fire, which will try to update <code>panel.webview.html</code>, which of course will throw an exception. Cats hate exceptions. Let's fix this!</p>
<p>The <code>onDidDispose</code> event is fired when a webview is destroyed. We can use this event to cancel further updates and clean up the webview's resources:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cats</span><span style="color: #000000"> = {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif&#39;</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">iteration</span><span style="color: #000000"> = </span><span style="color: #098658">0</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #795E26">updateWebview</span><span style="color: #000000"> = () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cat</span><span style="color: #000000"> = </span><span style="color: #001080">iteration</span><span style="color: #000000">++ % </span><span style="color: #098658">2</span><span style="color: #000000"> ? </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #000000"> : </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000"> = </span><span style="color: #001080">cat</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">cat</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">      };</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #795E26">updateWebview</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">interval</span><span style="color: #000000"> = </span><span style="color: #795E26">setInterval</span><span style="color: #000000">(</span><span style="color: #001080">updateWebview</span><span style="color: #000000">, </span><span style="color: #098658">1000</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #795E26">onDidDispose</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #008000">// When the panel is closed, cancel any future updates to the webview content</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #795E26">clearInterval</span><span style="color: #000000">(</span><span style="color: #001080">interval</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">        },</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Extensions can also programmatically close webviews by calling <code>dispose()</code> on them. If, for example, we wanted to restrict our cat's workday to five seconds:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">cats</span><span style="color: #000000">[</span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">]);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// After 5sec, programmatically close the webview panel</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">timeout</span><span style="color: #000000"> = </span><span style="color: #795E26">setTimeout</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #795E26">dispose</span><span style="color: #000000">(), </span><span style="color: #098658">5000</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #795E26">onDidDispose</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #008000">// Handle user closing panel before the 5sec have passed</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #795E26">clearTimeout</span><span style="color: #000000">(</span><span style="color: #001080">timeout</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">        },</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<h3 id="visibility-and-moving" data-needslink="visibility-and-moving">Visibility and Moving</h3>
<p>When a webview panel is moved into a background tab, it becomes hidden. It is not destroyed however. VS Code will automatically restore the webview's content from <code>webview.html</code> when the panel is brought to the foreground again:</p>
<p><img src="../../assets/api/extension-guides/webview/basics-restore.gif" alt="Webview content is automatically restored when the webview becomes visible again" loading="lazy"></p>
<p>The <code>.visible</code> property tells you if the webview panel is currently visible or not.</p>
<p>Extensions can programmatically bring a webview panel to the foreground by calling <code>reveal()</code>. This method takes an optional target view column to show the panel in. A webview panel may only show in a single editor column at a time. Calling <code>reveal()</code> or dragging a webview panel to a new editor column moves the webview into that new column.</p>
<p><img src="../../assets/api/extension-guides/webview/basics-drag.gif" alt="Webviews are moved when you drag them between tabs" loading="lazy"></p>
<p>Let's update our extension to only allow a single webview to exist at a time. If the panel is in the background, then the <code>catCoding.start</code> command will bring it to the foreground:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Track currently webview panel</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">currentPanel</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">WebviewPanel</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">columnToShowIn</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #001080">activeTextEditor</span></span>
<span class="line"><span style="color: #000000">        ? </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #001080">activeTextEditor</span><span style="color: #000000">.</span><span style="color: #001080">viewColumn</span></span>
<span class="line"><span style="color: #000000">        : </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">currentPanel</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #008000">// If we already have a panel, show it in the target column</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #795E26">reveal</span><span style="color: #000000">(</span><span style="color: #001080">columnToShowIn</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">      } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #008000">// Otherwise, create a new panel</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">columnToShowIn</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          {}</span></span>
<span class="line"><span style="color: #000000">        );</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #008000">// Reset when the current panel is closed</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #795E26">onDidDispose</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">          () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">currentPanel</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">          },</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">        );</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Here's the new extension in action:</p>
<p><img src="../../assets/api/extension-guides/webview/basics-single_panel.gif" alt="Using a single panel and reveal" loading="lazy"></p>
<p>Whenever a webview's visibility changes, or when a webview is moved into a new column, the <code>onDidChangeViewState</code> event is fired. Our extension can use this event to change cats based on which column the webview is showing in:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">cats</span><span style="color: #000000"> = {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/mlvseq9yvZhba/giphy.gif&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #A31515">&#39;Testing Cat&#39;</span><span style="color: #001080">:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;https://media.giphy.com/media/3oriO0OEd9QIDdllqo/giphy.gif&#39;</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Update contents based on view state changes</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #795E26">onDidChangeViewState</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">e</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">e</span><span style="color: #000000">.</span><span style="color: #001080">webviewPanel</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">viewColumn</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #795E26">updateWebviewForCat</span><span style="color: #000000">(</span><span style="color: #001080">panel</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;Coding Cat&#39;</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">Two</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #795E26">updateWebviewForCat</span><span style="color: #000000">(</span><span style="color: #001080">panel</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;Compiling Cat&#39;</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">Three</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #795E26">updateWebviewForCat</span><span style="color: #000000">(</span><span style="color: #001080">panel</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;Testing Cat&#39;</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">          }</span></span>
<span class="line"><span style="color: #000000">        },</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">null</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">updateWebviewForCat</span><span style="color: #000000">(</span><span style="color: #001080">panel</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">WebviewPanel</span><span style="color: #000000">, </span><span style="color: #001080">catName</span><span style="color: #000000">: </span><span style="color: #0000FF">keyof</span><span style="color: #000000"> </span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">cats</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">title</span><span style="color: #000000"> = </span><span style="color: #001080">catName</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">catName</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/basics-ondidchangeviewstate.gif" alt="Responding to onDidChangeViewState events" loading="lazy"></p>
<h3 id="inspecting-and-debugging-webviews" data-needslink="inspecting-and-debugging-webviews">Inspecting and debugging webviews</h3>
<p>The <strong>Developer: Toggle Developer Tools</strong> command opens a <a href="https://developer.chrome.com/docs/devtools/" class="external-link" target="_blank">Developer Tools</a> window that you can use debug and inspect your webviews.</p>
<p><img src="../../assets/api/extension-guides/webview/developer-overview.png" alt="The developer tools" loading="lazy"></p>
<p>Note that if you are using a version of VS Code older than 1.56, or if you are trying to debug a webview that sets <code>enableFindWidget</code>, you must instead use the <strong>Developer: Open Webview Developer Tools</strong> command. This command opens a dedicated Developer Tools page for each webview instead of using a Developer Tools page that is shared by all webviews and the editor itself.</p>
<p>From the Developer Tools, you can start inspecting the contents of your webview using the inspect tool located in the top left corner of the Developer Tools window:</p>
<p><img src="../../assets/api/extension-guides/webview/developer-inspect.png" alt="Inspecting a webview using the developer tools" loading="lazy"></p>
<p>You can also view all of the errors and logs from your webview in the developer tools console:</p>
<p><img src="../../assets/api/extension-guides/webview/developer-console.png" alt="The developer tools console" loading="lazy"></p>
<p>To evaluate an expression in the context of your webview, make sure to select the <strong>active frame</strong> environment from the dropdown in the top left corner of the Developer tools console panel:</p>
<p><img src="../../assets/api/extension-guides/webview/developer-active-frame.png" alt="Selecting the active frame" loading="lazy"></p>
<p>The <strong>active frame</strong> environment is where the webview scripts themselves are executed.</p>
<p>In addition, the <strong>Developer: Reload Webview</strong> command reloads all active webviews. This can be helpful if you need to reset a webview's state, or if some webview content on disk has changed and you want the new content to be loaded.</p>
<h2 id="loading-local-content" data-needslink="loading-local-content">Loading local content</h2>
<p>Webviews run in isolated contexts that cannot directly access local resources. This is done for security reasons. This means that in order to load images, stylesheets, and other resources from your extension, or to load any content from the user's current workspace, you must use the <code>Webview.asWebviewUri</code> function to convert a local <code>file:</code> URI into a special URI that VS Code can use to load a subset of local resources.</p>
<p>Imagine that we want to start bundling the cat gifs into our extension rather pulling them from Giphy. To do this, we first create a URI to the file on disk and then pass these URIs through the <code>asWebviewUri</code> function:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">path</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;path&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {}</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Get path to resource on disk</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">onDiskPath</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">Uri</span><span style="color: #000000">.</span><span style="color: #795E26">file</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">path</span><span style="color: #000000">.</span><span style="color: #795E26">join</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">extensionPath</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;media&#39;</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;cat.gif&#39;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// And get the special URI to use with the webview</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">catGifSrc</span><span style="color: #000000"> = </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #795E26">asWebviewUri</span><span style="color: #000000">(</span><span style="color: #001080">onDiskPath</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">catGifSrc</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>If we debug this code, we'd see that the actual value for <code>catGifSrc</code> is something like:</p>
<pre class="shiki"><code>vscode-resource:/Users/toonces/projects/vscode-cat-coding/media/cat.gif
</code></pre>
<p>VS Code understands this special URI and will use it to load our gif from the disk!</p>
<p>By default, webviews can only access resources in the following locations:</p>
<ul>
<li>Within your extension's install directory.</li>
<li>Within the user's currently active workspace.</li>
</ul>
<p>Use the <code>WebviewOptions.localResourceRoots</code> to allow access to additional local resources.</p>
<p>You can also always use data URIs to embed resources directly within the webview.</p>
<h3 id="controlling-access-to-local-resources" data-needslink="controlling-access-to-local-resources">Controlling access to local resources</h3>
<p>Webviews can control which resources can be loaded from the user's machine with <code>localResourceRoots</code> option. <code>localResourceRoots</code> defines a set of root URIs from which local content may be loaded.</p>
<p>We can use <code>localResourceRoots</code> to restrict <strong>Cat Coding</strong> webviews to only load resources from a <code>media</code> directory in our extension:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">path</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;path&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #008000">// Only allow the webview to access resources in our extension&#39;s media directory</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">localResourceRoots:</span><span style="color: #000000"> [</span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">Uri</span><span style="color: #000000">.</span><span style="color: #795E26">file</span><span style="color: #000000">(</span><span style="color: #001080">path</span><span style="color: #000000">.</span><span style="color: #795E26">join</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">extensionPath</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;media&#39;</span><span style="color: #000000">))]</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">onDiskPath</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">Uri</span><span style="color: #000000">.</span><span style="color: #795E26">file</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">path</span><span style="color: #000000">.</span><span style="color: #795E26">join</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">extensionPath</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;media&#39;</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;cat.gif&#39;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">catGifSrc</span><span style="color: #000000"> = </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #795E26">asWebviewUri</span><span style="color: #000000">(</span><span style="color: #001080">onDiskPath</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">(</span><span style="color: #001080">catGifSrc</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>To disallow all local resources, just set <code>localResourceRoots</code> to <code>[]</code>.</p>
<p>In general, webviews should be as restrictive as possible in loading local resources. However, keep in mind that <code>localResourceRoots</code> does not offer complete security protection on its own. Make sure your webview also follows <a href="#security">security best practices</a>, and add a <a href="#content-security-policy">content security policy</a> to further restrict the content that can be loaded.</p>
<h3 id="theming-webview-content" data-needslink="theming-webview-content">Theming webview content</h3>
<p>Webview can use CSS to change their appearance based on VS Code's current theme. VS Code groups themes into three categories, and adds a special class to the <code>body</code> element to indicate the current theme:</p>
<ul>
<li><code>vscode-light</code> - Light themes.</li>
<li><code>vscode-dark</code> - Dark themes.</li>
<li><code>vscode-high-contrast</code> - High contrast themes.</li>
</ul>
<p>The following CSS changes the text color of the webview based on the user's current theme:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #800000">body.vscode-light</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">color</span><span style="color: #000000">: </span><span style="color: #0451A5">black</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #800000">body.vscode-dark</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">color</span><span style="color: #000000">: </span><span style="color: #0451A5">white</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #800000">body.vscode-high-contrast</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">color</span><span style="color: #000000">: </span><span style="color: #0451A5">red</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>When developing a webview application, make sure that it works for the three types of themes. And always test your webview in high-contrast mode to make sure it will be usable by people with visual disabilities.</p>
<p>Webviews can also access VS Code theme colors using <a href="https://developer.mozilla.org/docs/Web/CSS/Using_CSS_variables" class="external-link" target="_blank">CSS variables</a>. These variable names are prefixed with <code>vscode</code> and replace the <code>.</code> with <code>-</code>. For example <code>editor.foreground</code> becomes <code>var(--vscode-editor-foreground)</code>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #800000">code</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">color</span><span style="color: #000000">: </span><span style="color: #795E26">var</span><span style="color: #000000">(</span><span style="color: #001080">--vscode-editor-foreground</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Review the <a href="../references/theme-color.html">Theme Color Reference</a> for the available theme variables. <a href="https://marketplace.visualstudio.com/items?itemName=connor4312.css-theme-completions" class="external-link" target="_blank">An extension</a> is available which provides IntelliSense suggestions for the variables.</p>
<p>The following font related variables are also defined:</p>
<ul>
<li><code>--vscode-editor-font-family</code> - Editor font family (from the <code>editor.fontFamily</code> setting).</li>
<li><code>--vscode-editor-font-weight</code> - Editor font weight (from the <code>editor.fontWeight</code> setting).</li>
<li><code>--vscode-editor-font-size</code> - Editor font size (from the <code>editor.fontSize</code> setting).</li>
</ul>
<p>Finally, for special cases where you need to write CSS that targets a single theme, the body element of webviews has a data attribute called <code>vscode-theme-id</code> that stores the ID of the currently active theme. This lets you write theme-specific CSS for webviews:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #800000">body</span><span style="color: #000000">[</span><span style="color: #E50000">data-vscode-theme-id</span><span style="color: #000000">=</span><span style="color: #A31515">&quot;One Dark Pro&quot;</span><span style="color: #000000">] {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #E50000">background</span><span style="color: #000000">: </span><span style="color: #0451A5">hotpink</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<h3 id="supported-media-formats" data-needslink="supported-media-formats">Supported media formats</h3>
<p>Webviews support audio and video, however not every media codec or media file container type is supported.</p>
<p>The following audio formats can be used in Webviews:</p>
<ul>
<li>Wav</li>
<li>Mp3</li>
<li>Ogg</li>
<li>Flac</li>
</ul>
<p>The following video formats can be used in webviews:</p>
<ul>
<li>H.264</li>
<li>VP8</li>
</ul>
<p>For video files, make sure that both the video and audio track's media formats are supported. Many <code>.mp4</code> files for example use <code>H.264</code> for video and <code>AAC</code> audio. VS Code will be able to play the video part of the <code>mp4</code>, but since <code>AAC</code> audio is not supported there won't be any sound. Instead you need to use <code>mp3</code> for the audio track.</p>
<h2 id="scripts-and-message-passing" data-needslink="scripts-and-message-passing">Scripts and message passing</h2>
<p>Webviews are just like iframes, which means that they can also run scripts. JavaScript is disabled in webviews by default, but it can easily re-enable by passing in the <code>enableScripts: true</code> option.</p>
<p>Let's use a script to add a counter tracking the lines of source code our cat has written. Running a basic script is pretty simple, but note that this example is only for demonstration purposes. In practice, your webview should always disable inline scripts using a <a href="#content-security-policy">content security policy</a>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">path</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;path&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #008000">// Enable scripts in the webview</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">enableScripts:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;script&gt;</span></span>
<span class="line"><span style="color: #A31515">        const counter = document.getElementById(&#39;lines-of-code-counter&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">        let count = 0;</span></span>
<span class="line"><span style="color: #A31515">        setInterval(() =&gt; {</span></span>
<span class="line"><span style="color: #A31515">            counter.textContent = count++;</span></span>
<span class="line"><span style="color: #A31515">        }, 100);</span></span>
<span class="line"><span style="color: #A31515">    &lt;/script&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/scripts-basic.gif" alt="A script running in a webview" loading="lazy"></p>
<p>Wow! that's one productive cat.</p>
<p>Webview scripts can do just about anything that a script on a normal webpage can. Keep in mind though that webviews exist in their own context, so scripts in a webview do not have access to the VS Code API. That's where message passing comes in!</p>
<h3 id="passing-messages-from-an-extension-to-a-webview" data-needslink="passing-messages-from-an-extension-to-a-webview">Passing messages from an extension to a webview</h3>
<p>An extension can send data to its webviews using <code>webview.postMessage()</code>. This method sends any JSON serializable data to the webview. The message is received inside the webview through the standard <code>message</code> event.</p>
<p>To demonstrate this, let's add a new command to <strong>Cat Coding</strong> that instructs the currently coding cat to refactor their code (thereby reducing the total number of lines). The new <code>catCoding.doRefactor</code> command use <code>postMessage</code> to send the instruction to the current webview, and <code>window.addEventListener('message', event =&gt; { ... })</code> inside the webview itself to handle the message:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Only allow a single Cat Coder</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">currentPanel</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">WebviewPanel</span><span style="color: #000000"> | </span><span style="color: #267F99">undefined</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #001080">currentPanel</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #795E26">reveal</span><span style="color: #000000">(</span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">      } </span><span style="color: #AF00DB">else</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">enableScripts:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span></span>
<span class="line"><span style="color: #000000">          }</span></span>
<span class="line"><span style="color: #000000">        );</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #795E26">onDidDispose</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">          () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #001080">currentPanel</span><span style="color: #000000"> = </span><span style="color: #0000FF">undefined</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">          },</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #0000FF">undefined</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">        );</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Our new command</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.doRefactor&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">currentPanel</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">      }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Send a message to our webview.</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// You can send any JSON serializable data.</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">currentPanel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #795E26">postMessage</span><span style="color: #000000">({ </span><span style="color: #001080">command:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;refactor&#39;</span><span style="color: #000000"> });</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;script&gt;</span></span>
<span class="line"><span style="color: #A31515">        const counter = document.getElementById(&#39;lines-of-code-counter&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">        let count = 0;</span></span>
<span class="line"><span style="color: #A31515">        setInterval(() =&gt; {</span></span>
<span class="line"><span style="color: #A31515">            counter.textContent = count++;</span></span>
<span class="line"><span style="color: #A31515">        }, 100);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">        // Handle the message inside the webview</span></span>
<span class="line"><span style="color: #A31515">        window.addEventListener(&#39;message&#39;, event =&gt; {</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">            const message = event.data; // The JSON data our extension sent</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">            switch (message.command) {</span></span>
<span class="line"><span style="color: #A31515">                case &#39;refactor&#39;:</span></span>
<span class="line"><span style="color: #A31515">                    count = Math.ceil(count * 0.5);</span></span>
<span class="line"><span style="color: #A31515">                    counter.textContent = count;</span></span>
<span class="line"><span style="color: #A31515">                    break;</span></span>
<span class="line"><span style="color: #A31515">            }</span></span>
<span class="line"><span style="color: #A31515">        });</span></span>
<span class="line"><span style="color: #A31515">    &lt;/script&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/scripts-extension_to_webview.gif" alt="Passing messages to a webview" loading="lazy"></p>
<h3 id="passing-messages-from-a-webview-to-an-extension" data-needslink="passing-messages-from-a-webview-to-an-extension">Passing messages from a webview to an extension</h3>
<p>Webviews can also pass messages back to their extension. This is accomplished using a <code>postMessage</code> function on a special VS Code API object inside the webview. To access the VS Code API object, call <code>acquireVsCodeApi</code> inside the webview. This function can only be invoked once per session. You must hang onto the instance of the VS Code API returned by this method, and hand it out to any other functions that need to use it.</p>
<p>We can use the VS Code API and <code>postMessage</code> in our <strong>Cat Coding</strong> webview to alert the extension when our cat introduces a bug in their code:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">enableScripts:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #008000">// Handle messages from the webview</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #795E26">onDidReceiveMessage</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">message</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #AF00DB">switch</span><span style="color: #000000"> (</span><span style="color: #001080">message</span><span style="color: #000000">.</span><span style="color: #001080">command</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">            </span><span style="color: #AF00DB">case</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;alert&#39;</span><span style="color: #000000">:</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">showErrorMessage</span><span style="color: #000000">(</span><span style="color: #001080">message</span><span style="color: #000000">.</span><span style="color: #001080">text</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">              </span><span style="color: #AF00DB">return</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">          }</span></span>
<span class="line"><span style="color: #000000">        },</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #0000FF">undefined</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;script&gt;</span></span>
<span class="line"><span style="color: #A31515">        (function() {</span></span>
<span class="line"><span style="color: #A31515">            const vscode = acquireVsCodeApi();</span></span>
<span class="line"><span style="color: #A31515">            const counter = document.getElementById(&#39;lines-of-code-counter&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">            let count = 0;</span></span>
<span class="line"><span style="color: #A31515">            setInterval(() =&gt; {</span></span>
<span class="line"><span style="color: #A31515">                counter.textContent = count++;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">                // Alert the extension when our cat introduces a bug</span></span>
<span class="line"><span style="color: #A31515">                if (Math.random() &lt; 0.001 * count) {</span></span>
<span class="line"><span style="color: #A31515">                    vscode.postMessage({</span></span>
<span class="line"><span style="color: #A31515">                        command: &#39;alert&#39;,</span></span>
<span class="line"><span style="color: #A31515">                        text: &#39;🐛  on line &#39; + count</span></span>
<span class="line"><span style="color: #A31515">                    })</span></span>
<span class="line"><span style="color: #A31515">                }</span></span>
<span class="line"><span style="color: #A31515">            }, 100);</span></span>
<span class="line"><span style="color: #A31515">        }())</span></span>
<span class="line"><span style="color: #A31515">    &lt;/script&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/scripts-webview_to_extension.gif" alt="Passing messages from the webview to the main extension" loading="lazy"></p>
<p>For security reasons, you must keep the VS Code API object private and make sure it is never leaked into the global scope.</p>
<h3 id="using-web-workers" data-needslink="using-web-workers">Using Web Workers</h3>
<p><a href="https://developer.mozilla.org/docs/Web/API/Web_Workers_API/Using_web_workers" class="external-link" target="_blank">Web Workers</a> are supported inside of webviews but there are a few important restrictions to be aware of.</p>
<p>First off, workers can only be loaded using either a <code>data:</code> or <code>blob:</code> URI. You cannot directly load a worker from your extension's folder.</p>
<p>If you do need to load worker code from a JavaScript file in your extension, try using <code>fetch</code>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">workerSource</span><span style="color: #000000"> = </span><span style="color: #A31515">&#39;absolute/path/to/worker.js&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #001080">workerSource</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">  .</span><span style="color: #795E26">then</span><span style="color: #000000">(</span><span style="color: #001080">result</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">blob</span><span style="color: #000000">())</span></span>
<span class="line"><span style="color: #000000">  .</span><span style="color: #795E26">then</span><span style="color: #000000">(</span><span style="color: #001080">blob</span><span style="color: #000000"> </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">blobUrl</span><span style="color: #000000"> = </span><span style="color: #0070C1">URL</span><span style="color: #000000">.</span><span style="color: #795E26">createObjectURL</span><span style="color: #000000">(</span><span style="color: #001080">blob</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">Worker</span><span style="color: #000000">(</span><span style="color: #001080">blobUrl</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">  });</span></span>
<span class="line"></span></code></pre>
<p>Worker scripts also do not support importing source code using <code>importScripts</code> or <code>import(...)</code>. If your worker loads code dynamically, try using a bundler such as <a href="https://webpack.js.org/" class="external-link" target="_blank">webpack</a> to package the worker script into a single file.</p>
<p>With <code>webpack</code>, you can use <code>LimitChunkCountPlugin</code> to force the compiled worker JavaScript to be a single file:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">path</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;path&#39;</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">webpack</span><span style="color: #000000"> = </span><span style="color: #795E26">require</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;webpack&#39;</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #267F99">module</span><span style="color: #000000">.</span><span style="color: #267F99">exports</span><span style="color: #000000"> = {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">target:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;webworker&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">entry:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;./worker/src/index.js&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">output:</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">filename:</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;worker.js&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">path:</span><span style="color: #000000"> </span><span style="color: #001080">path</span><span style="color: #000000">.</span><span style="color: #795E26">resolve</span><span style="color: #000000">(</span><span style="color: #001080">__dirname</span><span style="color: #000000">, </span><span style="color: #A31515">&#39;media&#39;</span><span style="color: #000000">)</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">plugins:</span><span style="color: #000000"> [</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #001080">webpack</span><span style="color: #000000">.</span><span style="color: #001080">optimize</span><span style="color: #000000">.</span><span style="color: #795E26">LimitChunkCountPlugin</span><span style="color: #000000">({</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">maxChunks:</span><span style="color: #000000"> </span><span style="color: #098658">1</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  ]</span></span>
<span class="line"><span style="color: #000000">};</span></span>
<span class="line"></span></code></pre>
<h2 id="security" data-needslink="security">Security</h2>
<p>As with any webpage, when creating a webview, you must follow some basic security best practices.</p>
<h3 id="limit-capabilities" data-needslink="limit-capabilities">Limit capabilities</h3>
<p>A webview should have the minimum set of capabilities that it needs. For example, if your webview does not need to run scripts, do not set the <code>enableScripts: true</code>. If your webview does not need to load resources from the user's workspace, set <code>localResourceRoots</code> to <code>[vscode.Uri.file(extensionContext.extensionPath)]</code> or even <code>[]</code> to disallow access to all local resources.</p>
<h3 id="content-security-policy" data-needslink="content-security-policy">Content security policy</h3>
<p><a href="https://developers.google.com/web/fundamentals/security/csp/" class="external-link" target="_blank">Content security policies</a> further restrict the content that can be loaded and executed in webviews. For example, a content security policy can make sure that only a list of allowed scripts can be run in the webview, or even tell the webview to only load images over <code>https</code>.</p>
<p>To add a content security policy, put a <code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot;&gt;</code> directive at the top of the webview's <code>&lt;head&gt;</code></p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src &#39;none&#39;;&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    ...</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>The policy <code>default-src 'none';</code> disallows all content. We can then turn back on the minimal amount of content that our extension needs to function. Here's a content security policy that allows loading local scripts and stylesheets, and loading images over <code>https</code>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #800000">&lt;meta</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">http-equiv</span><span style="color: #000000">=</span><span style="color: #0000FF">&quot;Content-Security-Policy&quot;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #E50000">content</span><span style="color: #000000">=</span><span style="color: #0000FF">&quot;default-src &#39;none&#39;; img-src ${webview.cspSource} https:; script-src ${webview.cspSource}; style-src ${webview.cspSource};&quot;</span></span>
<span class="line"><span style="color: #800000">/&gt;</span></span>
<span class="line"></span></code></pre>
<p>The <code>${webview.cspSource}</code> value is a placeholder for a value that comes from the webview object itself. See the <a href="https://github.com/microsoft/vscode-extension-samples/blob/main/webview-sample" class="external-link" target="_blank">webview sample</a> for a complete example of how to use this value.</p>
<p>This content security policy also implicitly disables inline scripts and styles. It is a best practice to extract all inline styles and scripts to external files so that they can be properly loaded without relaxing the content security policy.</p>
<h3 id="only-load-content-over-https" data-needslink="only-load-content-over-https">Only load content over https</h3>
<p>If your webview allows loading external resources, it is strongly recommended that you only allow these resources to be loaded over <code>https</code> and not over http. The example content security policy above already does this by only allowing images to be loaded over <code>https:</code>.</p>
<h3 id="sanitize-all-user-input" data-needslink="sanitize-all-user-input">Sanitize all user input</h3>
<p>Just as you would for a normal webpage, when constructing the HTML for a webview, you must sanitize all user input. Failing to properly sanitize input can allow content injections, which may open your users up to a security risk.</p>
<p>Example values that must be sanitized:</p>
<ul>
<li>File contents.</li>
<li>File and folder paths.</li>
<li>User and workspace settings.</li>
</ul>
<p>Consider using a helper library to construct your HTML strings, or at least ensure that all content from the user's workspace is properly sanitized.</p>
<p>Never rely on sanitization alone for security. Make sure to follow the other security best practices, such as having a <a href="#content-security-policy">content security policy</a> to minimize the impact of any potential content injections.</p>
<h2 id="persistence" data-needslink="persistence">Persistence</h2>
<p>In the standard webview <a href="#lifecycle">lifecycle</a>, webviews are created by <code>createWebviewPanel</code> and destroyed when the user closes them or when <code>.dispose()</code> is called. The contents of webviews however are created when the webview becomes visible and destroyed when the webview is moved into the background. Any state inside the webview will be lost when the webview is moved to a background tab.</p>
<p>The best way to solve this is to make your webview stateless. Use <a href="#passing-messages-from-a-webview-to-an-extension">message passing</a> to save off the webview's state and then restore the state when the webview becomes visible again.</p>
<h3 id="getstate-and-setstate" data-needslink="getstate-and-setstate">getState and setState</h3>
<p>Scripts running inside a webview can use the <code>getState</code> and <code>setState</code> methods to save off and restore a JSON serializable state object. This state is persisted even after the webview content itself is destroyed when a webview panel becomes hidden. The state is destroyed when the webview panel is destroyed.</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// Inside a webview script</span></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">vscode</span><span style="color: #000000"> = </span><span style="color: #795E26">acquireVsCodeApi</span><span style="color: #000000">();</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">counter</span><span style="color: #000000"> = </span><span style="color: #001080">document</span><span style="color: #000000">.</span><span style="color: #795E26">getElementById</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;lines-of-code-counter&#39;</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">// Check if we have an old state to restore from</span></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">previousState</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #795E26">getState</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #0000FF">let</span><span style="color: #000000"> </span><span style="color: #001080">count</span><span style="color: #000000"> = </span><span style="color: #001080">previousState</span><span style="color: #000000"> ? </span><span style="color: #001080">previousState</span><span style="color: #000000">.</span><span style="color: #001080">count</span><span style="color: #000000"> : </span><span style="color: #098658">0</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #001080">counter</span><span style="color: #000000">.</span><span style="color: #001080">textContent</span><span style="color: #000000"> = </span><span style="color: #001080">count</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">setInterval</span><span style="color: #000000">(() </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">counter</span><span style="color: #000000">.</span><span style="color: #001080">textContent</span><span style="color: #000000"> = </span><span style="color: #001080">count</span><span style="color: #000000">++;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Update the saved state</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #795E26">setState</span><span style="color: #000000">({ </span><span style="color: #001080">count</span><span style="color: #000000"> });</span></span>
<span class="line"><span style="color: #000000">}, </span><span style="color: #098658">100</span><span style="color: #000000">);</span></span>
<span class="line"></span></code></pre>
<p><code>getState</code> and <code>setState</code> are the preferred way to persist state, as they have much lower performance overhead than <code>retainContextWhenHidden</code>.</p>
<h3 id="serialization" data-needslink="serialization">Serialization</h3>
<p>By implementing a <code>WebviewPanelSerializer</code>, your webviews can be automatically restored when VS Code restarts. Serialization builds on <code>getState</code> and <code>setState</code>, and is only enabled if your extension registers a <code>WebviewPanelSerializer</code> for your webviews.</p>
<p>To make our coding cats persist across VS Code restarts, first add a <code>onWebviewPanel</code> activation event to the extension's <code>package.json</code>:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #A31515">&quot;activationEvents&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #CD3131">...</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #A31515">&quot;onWebviewPanel:catCoding&quot;</span></span>
<span class="line"><span style="color: #000000">]</span></span>
<span class="line"></span></code></pre>
<p>This activation event ensures that our extension will be activated whenever VS Code needs to restore a webview with the viewType: <code>catCoding</code>.</p>
<p>Then, in our extension's <code>activate</code> method, call <code>registerWebviewPanelSerializer</code> to register a new <code>WebviewPanelSerializer</code>. The <code>WebviewPanelSerializer</code> is responsible for restoring the contents of the webview from its persisted state. This state is the JSON blob that the webview contents set using <code>setState</code>.</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// Normal setup...</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #008000">// And make sure we register a serializer for our webview type</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">registerWebviewPanelSerializer</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">, </span><span style="color: #0000FF">new</span><span style="color: #000000"> </span><span style="color: #795E26">CatCodingSerializer</span><span style="color: #000000">());</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">CatCodingSerializer</span><span style="color: #000000"> </span><span style="color: #0000FF">implements</span><span style="color: #000000"> </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">WebviewPanelSerializer</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #795E26">deserializeWebviewPanel</span><span style="color: #000000">(</span><span style="color: #001080">webviewPanel</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">WebviewPanel</span><span style="color: #000000">, </span><span style="color: #001080">state</span><span style="color: #000000">: </span><span style="color: #267F99">any</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// `state` is the state persisted using `setState` inside the webview</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">console</span><span style="color: #000000">.</span><span style="color: #795E26">log</span><span style="color: #000000">(</span><span style="color: #A31515">`Got state: </span><span style="color: #0000FF">${</span><span style="color: #001080">state</span><span style="color: #0000FF">}</span><span style="color: #A31515">`</span><span style="color: #000000">);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// Restore the content of our webview.</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">//</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// Make sure we hold on to the `webviewPanel` passed in here and</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// also restore any event listeners we need on it.</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">webviewPanel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Now if you restart VS Code with a cat coding panel open, the panel will be automatically restored in the same editor position.</p>
<h3 id="retaincontextwhenhidden" data-needslink="retaincontextwhenhidden">retainContextWhenHidden</h3>
<p>For webviews with very complex UI or state that cannot be quickly saved and restored, you can instead use the <code>retainContextWhenHidden</code> option. This option makes a webview keep its content around but in a hidden state, even when the webview itself is no longer in the foreground.</p>
<p>Although <strong>Cat Coding</strong> can hardly be said to have complex state, let's try enabling <code>retainContextWhenHidden</code> to see how the option changes a webview's behavior:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">import</span><span style="color: #000000"> </span><span style="color: #0000FF">*</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #001080">vscode</span><span style="color: #000000"> </span><span style="color: #AF00DB">from</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;vscode&#39;</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">activate</span><span style="color: #000000">(</span><span style="color: #001080">context</span><span style="color: #000000">: </span><span style="color: #267F99">vscode</span><span style="color: #000000">.</span><span style="color: #267F99">ExtensionContext</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">context</span><span style="color: #000000">.</span><span style="color: #001080">subscriptions</span><span style="color: #000000">.</span><span style="color: #795E26">push</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">commands</span><span style="color: #000000">.</span><span style="color: #795E26">registerCommand</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;catCoding.start&#39;</span><span style="color: #000000">, () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">panel</span><span style="color: #000000"> = </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">window</span><span style="color: #000000">.</span><span style="color: #795E26">createWebviewPanel</span><span style="color: #000000">(</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;catCoding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #A31515">&#39;Cat Coding&#39;</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        </span><span style="color: #001080">vscode</span><span style="color: #000000">.</span><span style="color: #001080">ViewColumn</span><span style="color: #000000">.</span><span style="color: #001080">One</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">        {</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">enableScripts:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span><span style="color: #000000">,</span></span>
<span class="line"><span style="color: #000000">          </span><span style="color: #001080">retainContextWhenHidden:</span><span style="color: #000000"> </span><span style="color: #0000FF">true</span></span>
<span class="line"><span style="color: #000000">        }</span></span>
<span class="line"><span style="color: #000000">      );</span></span>
<span class="line"><span style="color: #000000">      </span><span style="color: #001080">panel</span><span style="color: #000000">.</span><span style="color: #001080">webview</span><span style="color: #000000">.</span><span style="color: #001080">html</span><span style="color: #000000"> = </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">    })</span></span>
<span class="line"><span style="color: #000000">  );</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getWebviewContent</span><span style="color: #000000">() {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">`&lt;!DOCTYPE html&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;html lang=&quot;en&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;head&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;title&gt;Cat Coding&lt;/title&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/head&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;body&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;img src=&quot;https://media.giphy.com/media/JIX9t2j0ZTN9S/giphy.gif&quot; width=&quot;300&quot; /&gt;</span></span>
<span class="line"><span style="color: #A31515">    &lt;h1 id=&quot;lines-of-code-counter&quot;&gt;0&lt;/h1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">    &lt;script&gt;</span></span>
<span class="line"><span style="color: #A31515">        const counter = document.getElementById(&#39;lines-of-code-counter&#39;);</span></span>
<span class="line"></span>
<span class="line"><span style="color: #A31515">        let count = 0;</span></span>
<span class="line"><span style="color: #A31515">        setInterval(() =&gt; {</span></span>
<span class="line"><span style="color: #A31515">            counter.textContent = count++;</span></span>
<span class="line"><span style="color: #A31515">        }, 100);</span></span>
<span class="line"><span style="color: #A31515">    &lt;/script&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/body&gt;</span></span>
<span class="line"><span style="color: #A31515">&lt;/html&gt;`</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p><img src="../../assets/api/extension-guides/webview/persistence-retrain.gif" alt="persistence retrain" loading="lazy"></p>
<p>Notice how the counter does not reset now when the webview is hidden and then restored. No extra code required! With <code>retainContextWhenHidden</code>, the webview acts similarly to a background tab in a web browser. Scripts and other dynamic content are suspended, but immediately resumed once the webview becomes visible again. You cannot send messages to a hidden webview, even when <code>retainContextWhenHidden</code> is enabled.</p>
<p>Although <code>retainContextWhenHidden</code> may be appealing, keep in mind that this has high memory overhead and should only be used when other persistence techniques will not work.</p>
<h2 id="accessibility" data-needslink="accessibility">Accessibility</h2>
<p>The class <code>vscode-using-screen-reader</code> will be added to your webview's main body in contexts where the user is operating VS Code with a screen reader. Additionally, the class <code>vscode-reduce-motion</code> will be added to the document's main body element in cases where the user has expressed a preference to reduce the amount of motion in the window. By observing these classes and adjusting your rendering accordingly, your webview content can better reflect the user's preferences.</p>
<h2 id="next-steps" data-needslink="next-steps">Next steps</h2>
<p>If you'd like to learn more about VS Code extensibility, try these topics:</p>
<ul>
<li><a href="../../api.html">Extension API</a> - Learn about the full VS Code Extension API.</li>
<li><a href="../extension-capabilities/overview.html">Extension Capabilities</a> - Take a look at other ways to extend VS Code.</li>
</ul>

			<div class="feedback"></div>
			
			<div class="body-footer">12/7/2022</div>
			
		</div>
		<div class="col-sm-3 col-md-2 docs-subnavbar-container">
			<nav id="docs-subnavbar" aria-label="On Page" data-spy="affix" data-offset-top="20">
				
				<h4><span class="sr-only">In this article there are 9 sections</span><span
						aria-hidden="true">In this article</span></h4>
				<ul class="nav">
					
					<li><a href="#links">Links</a></li>
					
					<li><a href="#should-i-use-a-webview">Should I use a webview?</a></li>
					
					<li><a href="#webviews-api-basics">Webviews API basics</a></li>
					
					<li><a href="#loading-local-content">Loading local content</a></li>
					
					<li><a href="#scripts-and-message-passing">Scripts and message passing</a></li>
					
					<li><a href="#security">Security</a></li>
					
					<li><a href="#persistence">Persistence</a></li>
					
					<li><a href="#accessibility">Accessibility</a></li>
					
					<li><a href="#next-steps">Next steps</a></li>
					
				</ul>
				
				<div class="connect-widget"></div>
			</nav>
		</div>
	</div>
</div>
      </div>
  </div>

  <footer role="contentinfo">
      <div class="container">
          <div class="row">
              <div class="left col-md-7">
                  <ul class="links">
                      <li>
                          <span class="message">Hello from Seattle.</span>
                      </li>
                      <li>
                          <a href="https://go.microsoft.com/fwlink/?LinkID=533687" onclick="followOnTwitter()" tabindex="0">Follow @code</a>
                      </li>
                      <li>
                          <div class="github-star-button">
                              <iframe src="../../assets/github-button29be.html?user=Microsoft&amp;repo=vscode&amp;type=star&amp;count=true"
                                  frameborder="0" scrolling="0" width="130px" height="20px" title="GitHub follow button" loading="lazy"></iframe>
                          </div>
                      </li>
  
                      <script>
                          function followOnTwitter() {
                              var windowFeatures = "location=yes,height=600,width=550,scrollbars=yes,status=yes";
                              var originalReferer = "&original_referer=" + document.URL;
                              var screenName = "&screen_name=code";
                              var URL = "https://twitter.com/intent/follow?" + originalReferer + screenName;
                              window.open(URL, "_blank", windowFeatures);
                          }
  
                          function manageConsent() {
                              if(WcpConsent.siteConsent.isConsentRequired){
                                  WcpConsent.siteConsent.manageConsent();
                              }
                          }
                      </script>
                  </ul>
              </div>
              <div class="right col-md-5">
                  <ul class="links">
                      <li><a id="footer-support-link" href="https://support.serviceshub.microsoft.com/supportforbusiness/create?sapId=d66407ed-3967-b000-4cfb-2c318cad363d"
                              target="_blank">Support</a></li>
                      <li><a id="footer-privacy-link" href="https://privacy.microsoft.com/privacystatement"
                              target="_blank">Privacy</a></li>
                      <li style="display: none;"><a id="footer-cookie-link" style="cursor: pointer;" onclick="manageConsent()"
                              target="_blank">Manage Cookies</a></li>
                      <li><a id="footer-terms-link" href="https://www.microsoft.com/legal/terms-of-use"
                              target="_blank">Terms of Use</a></li>
                      <li><a id="footer-license-link" href="../../License.html">License</a></li>
                  </ul>
                  <div class="copyright">
                      <a id="footer-microsoft-link" class="logo" href="https://www.microsoft.com/">
                          <img class="microsoft-logo" src="../../assets/images/microsoft-logo.png" height="20" alt="Microsoft homepage"/>
                          <img class="microsoft-logo-inverted" src="../../assets/images/microsoft-logo-inverted.png" height="20" alt="Microsoft homepage" />
                      </a>
                      <span>&copy; 2023 Microsoft</span>
                  </div>
              </div>
          </div>
      </div>
  </footer>
  <script src="../../dist/index.js"></script>

  

  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "SoftwareApplication",
      "name" : "Visual Studio Code",
      "softwareVersion": "1.74",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "applicationCategory": "DeveloperApplication",
      "applicationSubCategory": "Text Editor",
      "alternateName": "VS Code",
      "datePublished": "2021-11-03",
      "operatingSystem": "Mac, Linux, Windows",
      "logo": "https://code.visualstudio.com/assets/apple-touch-icon.png",
      "screenshot": "https://code.visualstudio.com/assets/home/home-screenshot-win.png",
      "releaseNotes": "https://code.visualstudio.com/updates",
      "downloadUrl": "https://code.visualstudio.com/download",
      "license": "https://code.visualstudio.com/license",
      "softwareRequirements": "https://code.visualstudio.com/docs/supporting/requirements",
      "url" : "https://code.visualstudio.com",
      "author": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "maintainer": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://code.visualstudio.com/Search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "sameAs" : [
        "https://en.wikipedia.org/wiki/Visual_Studio_Code",
        "https://twitter.com/code",
        "https://www.youtube.com/code",
        "https://www.tiktok.com/@vscode",
        "https://github.com/microsoft/vscode"
      ]
    }
  </script>
</body>

<!-- Mirrored from code.visualstudio.com/api/extension-guides/webview by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 04 Jan 2023 11:23:15 GMT -->
</html>