<!DOCTYPE html>
<html lang="en">

<!-- Mirrored from code.visualstudio.com/blogs/2019/05/23/strict-null by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 04 Jan 2023 12:15:16 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="google-site-verification" content="hNs7DXrTySP_X-0P_AC0WulAXvUwgSXEmgfcO2r79dw" />

  <!-- Twitter and Facebook OpenGraph Metadata-->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@code" />

  <meta name="description" content="Strict null checking the Visual Studio Code codebase" />
<meta name="keywords" content="" />
<!-- Twitter and Facebook OpenGraph Metadata-->
<meta name="twitter:card" content="summary_large_image" />
<meta property="og:url" content="strict-null.html" />
<meta property="og:type" content="article" />
<meta property="og:title" content="Strict null checking the Visual Studio Code codebase" />
<meta property="og:description" content="Strict null checking the Visual Studio Code codebase" />

<meta property="og:image" content="../../../../assets/blogs/2019/05/23/social-strict-null.png" />



  <link rel="shortcut icon" href="../../../../favicon.ico" sizes="128x128" />
  <link rel="apple-touch-icon" href="../../../../apple-touch-icon.png">

  <title>Strict null checking the Visual Studio Code codebase</title>

  <link rel="stylesheet" href="../../../../vendor/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../dist/style.css">

  <script type="text/javascript" src="../../../../../js.monitor.azure.com/scripts/c/ms.analytics-web-3.min.js"></script>
  <script>
  window.appInsights = new oneDS.ApplicationInsights();
  window.appInsights.initialize({
    instrumentationKey: "1a3eb3104447440391ad5f2a6ee06a0a-62879566-bc58-4741-9650-302bf2af703f-7103",
    webAnalyticsConfiguration:{ // Web Analytics Plugin configuration
        urlCollectQuery:true, 
        autoCapture: {
          scroll: true,
          pageView: true,
          onLoad: true,
          onUnload: true,
          click: true,
          resize: true,
          jsError: true
        }
    }
  }, []);
  </script>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','../../../../../www.google-analytics.com/analytics.js','ga');
  </script>  
  <link rel="alternate" type="application/atom+xml" title="RSS Feed for code.visualstudio.com" href="../../../../feed.xml" />
</head>

<body>
  <!-- EU Cookie Compliance JS -->
  <script src="../../../../../wcpstatic.microsoft.com/mscc/lib/v2/wcp-consent.js"></script>

  <div id="main">
          <div class="navbar-fixed-container">
              <div class="navbar navbar-inverse navbar-fixed-top ">
                  <div id='cookie-banner'></div>        <nav role="navigation" aria-label="Top Level">
                      <div class="container">
                          <div class="nav navbar-header">
                              <a role="button" id="skip-to-content" class="link-button" href="#main-content">Skip to content<i>&nbsp;</i><span class="glyphicon glyphicon-menu-down"></span></a>
                              <a class="navbar-brand" id="navbar-brand" href="../../../../index.html">Visual Studio Code</a>
                              <button type="button" class="navbar-toggle" role="navigation" data-toggle="collapse" data-target=".navbar-collapse" aria-label="Toggle Navigation Menu">
                                  <span class="icon-bar"></span>
                                  <span class="icon-bar"></span>
                                  <span class="icon-bar"></span>
                              </button>
                          </div>
                          <div class="navbar-collapse collapse" role="navigation">
                              <ul class="nav navbar-nav navbar-left">
                                  <li ><a id="nav-docs" href="../../../../docs.html">Docs</a></li>
                                  <li ><a id="nav-updates" href="../../../../updates/v1_74.html">Updates</a></li>
                                  <li class="active" ><a id="nav-blogs" href="../../../../blogs.html">Blog</a></li>
                                  <li ><a id="nav-extend" href="../../../../api.html">API</a></li>
                                  <li><a href="https://marketplace.visualstudio.com/VSCode" target="_blank" id="nav-extensions">Extensions</a></li>
                                  <li ><a id="nav-faqs" href="../../../../docs/supporting/faq.html">FAQ</a></li>
                                  <li ><a id="nav-learn" href="../../../../learn.html">Learn</a></li>
                                  <li class='search visible-xs visible-sm'
                                      ><a href="../../../../Search.html">Search</a></li>
                              </ul>
          
                              <ul class="nav navbar-nav navbar-right" role="presentation">
                                  <!-- Floating search icon -->
                                  <li>
                                      <a href="../../../../Search.html" title="Search" class="btn search-btn" id="nav-search">
                                          <img class="search-icon" src="../../../../assets/icons/search.svg" width="16px" height="16px" alt="Search"/>
                                          <img class="search-icon-inverted" src="../../../../assets/icons/search_dark.svg" width="16px" height="16px" alt="Search" />
                                      </a>
                                  </li>
                                  <!-- Actual search icon -->
                                  <li class="search" role="presentation">
                                      <form class="nav-search search-form" role="search" aria-label="Search">
                                          <div class="input-group" role="presentation">
                                              <input type="text" name="q" class="search-box form-control" placeholder="Search Docs" aria-label="Search text"/>
                                              <span class="input-group-btn">
                                                  <button tabindex="0" class="btn" type="submit" aria-label="Search">
                                                          <img class="search-icon" src="../../../../assets/icons/search.svg" width="16px" height="16px" alt="Search" />
                                                          <img class="search-icon-inverted" src="../../../../assets/icons/search_dark.svg" width="16px" height="16px" alt="Search" />
                                                  </button>
                                              </span>
                                          </div>
                                      </form>                        </li>
                                  <!-- this was hiden in the home and download page, keeping it for now -->
                                  <li><a class="link-button" href="../../../../Download.html" id="nav-download">
                                      <img class="download-icon" src="../../../../assets/icons/download.svg" width="16px" height="16px" alt="Download VS Code"/>
                                      <img class="download-icon-inverted" src="../../../../assets/icons/download-black.svg" width="16px" height="16px" alt="Download VS Code" />
                                      <span>Download</span>
                                  </a></li>
                              </ul>
                          </div>
                      </div>
                  </nav>
              </div>
          </div>          <div class="updates-banner  ">
              <div class="container">
                  <p class="message"><a href="../../../../updates/v1_74.html" id="banner-link-updates">Version 1.74</a> is now available! Read about the new features and fixes from November.</p> 
              </div>
              <div tabindex="0" role="button" title="Dismiss this update" class="dismiss-btn" id="banner-dismiss-btn"><span class="sr-only">Dismiss this update</span><span aria-hidden="true" class="glyph-icon"></span></div>
          </div>      <div role="main" id="main-content">
        <div class="container body-content docs blog">
    <div class="row">
        <div class="col-md-2 docs-navbar-container">
            <nav id="docs-navbar" aria-label="Blog posts" class="docs-nav updates-nav visible-md visible-lg">
            	<h4>Blog posts</h4>
            	<ul class="nav">
            		
            			<li >
            				<a href="../../../2022/12/07/remote-even-better.html" >Remote Development Even Better</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/11/28/vscode-sandbox.html" >VS Code Sandboxing</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/10/04/vscode-community-discussions.html" >VS Code Community Discussions</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/09/15/dev-container-features.html" >Dev Container Features</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/08/16/markdown-language-server.html" >Markdown Language Server</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/07/07/vscode-server.html" >The VS Code Server</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/05/18/dev-container-cli.html" >Dev container CLI</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/04/04/increase-productivity-with-containers.html" >Moving from Local to Remote Development</a>
            			</li>
            		
            			<li >
            				<a href="../../../2022/03/08/the-tutorial-problem.html" >The problem with tutorials</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/11/08/custom-notebooks.html" >Custom Notebooks</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/10/20/vscode-dev.html" >vscode.dev</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/10/11/webview-ui-toolkit.html" >Webview UI Toolkit</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/09/29/bracket-pair-colorization.html" >Bracket Pair Colorization</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/08/05/notebooks.html" >Notebooks</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/07/06/workspace-trust.html" >Workspace Trust</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/06/10/remote-repositories.html" >Remote Repositories</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/06/02/build-2021.html" >Build 2021</a>
            			</li>
            		
            			<li >
            				<a href="../../../2021/02/16/extension-bisect.html" >Extension bisect</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/12/03/chromebook-get-started.html" >VS Code on Chromebook</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/07/27/containers-edu.html" >Development Containers in Education</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/07/01/containers-wsl.html" >Dev Containers in WSL 2</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/06/09/go-extension.html" >The Go experience</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/05/14/vscode-build-2020.html" >VS Code at Build</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/05/06/github-issues-integration.html" >GitHub Issues Integration</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/03/02/docker-in-wsl2.html" >Docker in WSL 2</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/02/24/custom-data-format.html" >Custom Data Format</a>
            			</li>
            		
            			<li >
            				<a href="../../../2020/02/18/optimizing-ci.html" >Improving CI Build Times</a>
            			</li>
            		
            			<li >
            				<a href="../../10/31/inspecting-containers.html" >Inspecting Containers</a>
            			</li>
            		
            			<li >
            				<a href="../../10/03/remote-ssh-tips-and-tricks.html" >SSH Tips and Tricks</a>
            			</li>
            		
            			<li >
            				<a href="../../09/03/wsl2.html" >WSL 2</a>
            			</li>
            		
            			<li >
            				<a href="../../07/25/remote-ssh.html" >Remote SSH</a>
            			</li>
            		
            			<li class="active">
            				<a href="strict-null.html" aria-label="Current Page: Strict null checking">Strict null checking</a>
            			</li>
            		
            			<li >
            				<a href="../02/remote-development.html" >Remote Development</a>
            			</li>
            		
            			<li >
            				<a href="../../02/19/lsif.html" >Language Server Index Format</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/12/04/rich-navigation.html" >Rich Code Navigation</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/11/26/event-stream.html" >Event-Stream Package Security Update</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/09/12/engineering-with-azure-pipelines.html" >Using Azure Pipelines</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/09/10/introducing-github-pullrequests.html" >GitHub Pull Requests</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/08/07/debug-adapter-protocol-website.html" >New home for Debug Adapter Protocol</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/07/12/introducing-logpoints-and-auto-attach.html" >Logpoints and auto-attach</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/05/07/live-share-public-preview.html" >Live Share Preview</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/04/25/bing-settings-search.html" >Settings Search</a>
            			</li>
            		
            			<li >
            				<a href="../../../2018/03/23/text-buffer-reimplementation.html" >Text Buffer Reimplementation</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/12/20/chrome-debugging.html" >What's New for Chrome Debugging</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/11/16/connect.html" >Connect 2017</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/11/15/live-share.html" >Introducing Live Share</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/10/24/theicon.html" >The Icon Journey</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/10/03/terminal-renderer.html" >Integrated Terminal Performance</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/09/28/java-debug.html" >Java Debugging</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/08/07/emmet-2.html" >Emmet 2.0</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/06/20/great-looking-editor-roundup.html" >Fresh Paint</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/05/10/build-2017-demo.html" >Build 2017 Demo</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/04/10/sublime-text-roundup.html" >Sublime Text Extension Roundup</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/03/07/extension-pack-roundup.html" >Extension Packs</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/02/12/code-lens-roundup.html" >Extensions using CodeLens</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/02/08/syntax-highlighting-optimizations.html" >Optimizations in Syntax Highlighting</a>
            			</li>
            		
            			<li >
            				<a href="../../../2017/01/15/connect-nina-e2e.html" >Node.js Development with Visual Studio Code and Azure</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/12/12/roundup-customize.html" >Customize VS Code Extension Roundup</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/11/30/hot-exit-in-insiders.html" >Hot Exit Comes to Insiders</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/11/15/formatters-best-practices.html" >Creating a Formatter Extension</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/10/31/js_roundup_2.html" >JavaScript Extensions Part 2</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/09/14/js_roundup_1.html" >JavaScript Extensions Part 1</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/09/08/icon-themes.html" >File Icon Themes</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/07/29/extensions-roundup-git.html" >Extensions Roundup - Fun with Git</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/06/27/common-language-protocol.html" >The Language Server Protocol</a>
            			</li>
            		
            			<li >
            				<a href="../../../2016/05/04/extension-roundup-may.html" >Extensions Roundup</a>
            			</li>
            		
            	</ul>
            </nav>
            <nav id="small-nav" aria-label="Blog posts" class="docs-nav updates-nav hidden-md hidden-lg">
            	<h4>Blogs</h4>
            	<select id="small-nav-dropdown" aria-label="blog posts">
            		
            			<option value="/blogs/2022/12/07/remote-even-better" >Remote Development Even Better</option>
            		
            			<option value="/blogs/2022/11/28/vscode-sandbox" >VS Code Sandboxing</option>
            		
            			<option value="/blogs/2022/10/04/vscode-community-discussions" >VS Code Community Discussions</option>
            		
            			<option value="/blogs/2022/09/15/dev-container-features" >Dev Container Features</option>
            		
            			<option value="/blogs/2022/08/16/markdown-language-server" >Markdown Language Server</option>
            		
            			<option value="/blogs/2022/07/07/vscode-server" >The VS Code Server</option>
            		
            			<option value="/blogs/2022/05/18/dev-container-cli" >Dev container CLI</option>
            		
            			<option value="/blogs/2022/04/04/increase-productivity-with-containers" >Moving from Local to Remote Development</option>
            		
            			<option value="/blogs/2022/03/08/the-tutorial-problem" >The problem with tutorials</option>
            		
            			<option value="/blogs/2021/11/08/custom-notebooks" >Custom Notebooks</option>
            		
            			<option value="/blogs/2021/10/20/vscode-dev" >vscode.dev</option>
            		
            			<option value="/blogs/2021/10/11/webview-ui-toolkit" >Webview UI Toolkit</option>
            		
            			<option value="/blogs/2021/09/29/bracket-pair-colorization" >Bracket Pair Colorization</option>
            		
            			<option value="/blogs/2021/08/05/notebooks" >Notebooks</option>
            		
            			<option value="/blogs/2021/07/06/workspace-trust" >Workspace Trust</option>
            		
            			<option value="/blogs/2021/06/10/remote-repositories" >Remote Repositories</option>
            		
            			<option value="/blogs/2021/06/02/build-2021" >Build 2021</option>
            		
            			<option value="/blogs/2021/02/16/extension-bisect" >Extension bisect</option>
            		
            			<option value="/blogs/2020/12/03/chromebook-get-started" >VS Code on Chromebook</option>
            		
            			<option value="/blogs/2020/07/27/containers-edu" >Development Containers in Education</option>
            		
            			<option value="/blogs/2020/07/01/containers-wsl" >Dev Containers in WSL 2</option>
            		
            			<option value="/blogs/2020/06/09/go-extension" >The Go experience</option>
            		
            			<option value="/blogs/2020/05/14/vscode-build-2020" >VS Code at Build</option>
            		
            			<option value="/blogs/2020/05/06/github-issues-integration" >GitHub Issues Integration</option>
            		
            			<option value="/blogs/2020/03/02/docker-in-wsl2" >Docker in WSL 2</option>
            		
            			<option value="/blogs/2020/02/24/custom-data-format" >Custom Data Format</option>
            		
            			<option value="/blogs/2020/02/18/optimizing-ci" >Improving CI Build Times</option>
            		
            			<option value="/blogs/2019/10/31/inspecting-containers" >Inspecting Containers</option>
            		
            			<option value="/blogs/2019/10/03/remote-ssh-tips-and-tricks" >SSH Tips and Tricks</option>
            		
            			<option value="/blogs/2019/09/03/wsl2" >WSL 2</option>
            		
            			<option value="/blogs/2019/07/25/remote-ssh" >Remote SSH</option>
            		
            			<option value="/blogs/2019/05/23/strict-null" selected>Strict null checking</option>
            		
            			<option value="/blogs/2019/05/02/remote-development" >Remote Development</option>
            		
            			<option value="/blogs/2019/02/19/lsif" >Language Server Index Format</option>
            		
            			<option value="/blogs/2018/12/04/rich-navigation" >Rich Code Navigation</option>
            		
            			<option value="/blogs/2018/11/26/event-stream" >Event-Stream Package Security Update</option>
            		
            			<option value="/blogs/2018/09/12/engineering-with-azure-pipelines" >Using Azure Pipelines</option>
            		
            			<option value="/blogs/2018/09/10/introducing-github-pullrequests" >GitHub Pull Requests</option>
            		
            			<option value="/blogs/2018/08/07/debug-adapter-protocol-website" >New home for Debug Adapter Protocol</option>
            		
            			<option value="/blogs/2018/07/12/introducing-logpoints-and-auto-attach" >Logpoints and auto-attach</option>
            		
            			<option value="/blogs/2018/05/07/live-share-public-preview" >Live Share Preview</option>
            		
            			<option value="/blogs/2018/04/25/bing-settings-search" >Settings Search</option>
            		
            			<option value="/blogs/2018/03/23/text-buffer-reimplementation" >Text Buffer Reimplementation</option>
            		
            			<option value="/blogs/2017/12/20/chrome-debugging" >What's New for Chrome Debugging</option>
            		
            			<option value="/blogs/2017/11/16/connect" >Connect 2017</option>
            		
            			<option value="/blogs/2017/11/15/live-share" >Introducing Live Share</option>
            		
            			<option value="/blogs/2017/10/24/theicon" >The Icon Journey</option>
            		
            			<option value="/blogs/2017/10/03/terminal-renderer" >Integrated Terminal Performance</option>
            		
            			<option value="/blogs/2017/09/28/java-debug" >Java Debugging</option>
            		
            			<option value="/blogs/2017/08/07/emmet-2.0" >Emmet 2.0</option>
            		
            			<option value="/blogs/2017/06/20/great-looking-editor-roundup" >Fresh Paint</option>
            		
            			<option value="/blogs/2017/05/10/build-2017-demo" >Build 2017 Demo</option>
            		
            			<option value="/blogs/2017/04/10/sublime-text-roundup" >Sublime Text Extension Roundup</option>
            		
            			<option value="/blogs/2017/03/07/extension-pack-roundup" >Extension Packs</option>
            		
            			<option value="/blogs/2017/02/12/code-lens-roundup" >Extensions using CodeLens</option>
            		
            			<option value="/blogs/2017/02/08/syntax-highlighting-optimizations" >Optimizations in Syntax Highlighting</option>
            		
            			<option value="/blogs/2017/01/15/connect-nina-e2e" >Node.js Development with Visual Studio Code and Azure</option>
            		
            			<option value="/blogs/2016/12/12/roundup-customize" >Customize VS Code Extension Roundup</option>
            		
            			<option value="/blogs/2016/11/30/hot-exit-in-insiders" >Hot Exit Comes to Insiders</option>
            		
            			<option value="/blogs/2016/11/15/formatters-best-practices" >Creating a Formatter Extension</option>
            		
            			<option value="/blogs/2016/10/31/js_roundup_2" >JavaScript Extensions Part 2</option>
            		
            			<option value="/blogs/2016/09/14/js_roundup_1" >JavaScript Extensions Part 1</option>
            		
            			<option value="/blogs/2016/09/08/icon-themes" >File Icon Themes</option>
            		
            			<option value="/blogs/2016/07/29/extensions-roundup-git" >Extensions Roundup - Fun with Git</option>
            		
            			<option value="/blogs/2016/06/27/common-language-protocol" >The Language Server Protocol</option>
            		
            			<option value="/blogs/2016/05/04/extension-roundup-may" >Extensions Roundup</option>
            		
            	</select>
            </nav>        </div>
        <div class="col-sm-9 col-md-8 body">
            <h1>Strict null checking Visual Studio Code</h1>
<p>May 23, 2019 by Matt Bierner, <a href="https://twitter.com/mattbierner" class="external-link" target="_blank">@mattbierner</a></p>
<h2 id="_safety-permits-speed" data-needslink="_safety-permits-speed">Safety permits speed</h2>
<p>Moving fast is fun. It's fun to ship new features, make users happy, and improve our codebases. But, at the same time, it's not fun to ship a buggy product. No one likes getting issues or being woken up for an incident at three in the morning.</p>
<p>Although moving fast and shipping stable code are often presented as being incompatible, that shouldn't be the case. Many times the same factors that make code fragile and buggy are also what slow down development. After all, how can we move fast if we're always worried about breaking things?</p>
<p>In this post, I'd like to share a major engineering effort that the VS Code team recently completed: enabling TypeScript's <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#--strictNullChecks" class="external-link" target="_blank">strict null checking</a> in our codebase. We believe this work will allow us to both move faster and to ship a more stable product. Enabling strict null checking was motivated by understanding bugs not as isolated events but as symptoms of larger hazards in our source code. Using strict null checking as a case study, I'm going to discuss what motivated our work, how we came up with an incremental approach to addressing the problem, and how we went about implementing the fix. This same general approach to identifying and reducing hazards can be applied to any software project.</p>
<h2 id="_an-example" data-needslink="_an-example">An example</h2>
<p>To illustrate the problem VS Code was facing before enabling strict null checking, let's consider a simple TypeScript library. Don't worry if you're new to TypeScript; the specifics are not important. This make-believe example is only meant to illustrate the class of problem we were hitting in the VS Code codebase, as well as mentioning some traditional responses to such problems.</p>
<p>Our example library consists of a single <code>getStatus</code> function that fetches a given user's status from the backend of a hypothetical website:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">interface</span><span style="color: #000000"> </span><span style="color: #267F99">User</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">readonly</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000">: </span><span style="color: #267F99">string</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #008000">/**</span></span>
<span class="line"><span style="color: #008000"> * Get the status of a user</span></span>
<span class="line"><span style="color: #008000"> */</span></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #267F99">User</span><span style="color: #000000">): </span><span style="color: #267F99">Promise</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">id</span><span style="color: #000000"> = </span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">`/api/v0/</span><span style="color: #0000FF">${</span><span style="color: #001080">id</span><span style="color: #0000FF">}</span><span style="color: #A31515">/status`</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">json</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">json</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">json</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Looks reasonable. Ship it!</p>
<p>But after deploying our new code, we see a spike of crashes. From the call stack, it looks like the crashes are happening in our <code>getStatus</code> function. Uh oh!</p>
<p>Tracing back a little farther, it seems one of our fellow engineers is calling <code>getStatus(undefined)</code> in a misguided attempt to get the status of the current user. This causes an exception when the code tries to access: <code>undefined.id</code>. Simple mistake. And now that we know the cause, let's fix it!</p>
<p>So we update the calling code, update <code>getStatus</code> to handle <code>undefined</code>, and also add a helpful warning in our doc comment:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">/**</span></span>
<span class="line"><span style="color: #008000"> * Get the status of a user</span></span>
<span class="line"><span style="color: #008000"> *</span></span>
<span class="line"><span style="color: #008000"> * Don&#39;t call this with undefined or null!</span></span>
<span class="line"><span style="color: #008000"> */</span></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #267F99">User</span><span style="color: #000000">): </span><span style="color: #267F99">Promise</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">user</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">id</span><span style="color: #000000"> = </span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">`/api/v0/</span><span style="color: #0000FF">${</span><span style="color: #001080">id</span><span style="color: #0000FF">}</span><span style="color: #A31515">/status`</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">json</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">json</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">json</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>And because we are totally real engineers, we also write a test:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #795E26">it</span><span style="color: #000000">(</span><span style="color: #A31515">&#39;should return empty status for undefined user&#39;</span><span style="color: #000000">, </span><span style="color: #0000FF">async</span><span style="color: #000000"> () </span><span style="color: #0000FF">=&gt;</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #001080">assert</span><span style="color: #000000">.</span><span style="color: #795E26">equals</span><span style="color: #000000">(</span><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">), </span><span style="color: #A31515">&#39;&#39;</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">});</span></span>
<span class="line"></span></code></pre>
<p>Great! No more crashes. And we're even back at 100% test coverage too! Our code <strong>must</strong> be perfect now.</p>
<p>A few days go by and then: BOOM! Someone notices something strange in our logs, a huge number requests to <code>/api/v0/undefined/status</code>. That's an odd user name...</p>
<p>So we investigate again, fix the code again, add more tests. Maybe also send a passive-aggressive email to whoever was calling <code>getStatus({ id: undefined })</code>.</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">/**</span></span>
<span class="line"><span style="color: #008000"> * Get the status of a user</span></span>
<span class="line"><span style="color: #008000"> *</span></span>
<span class="line"><span style="color: #008000"> * !!!</span></span>
<span class="line"><span style="color: #008000"> * WARNING: Don&#39;t call this with undefined or null, or with a user without an id</span></span>
<span class="line"><span style="color: #008000"> * !!!</span></span>
<span class="line"><span style="color: #008000"> */</span></span>
<span class="line"><span style="color: #AF00DB">export</span><span style="color: #000000"> </span><span style="color: #0000FF">async</span><span style="color: #000000"> </span><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #001080">user</span><span style="color: #000000">: </span><span style="color: #267F99">User</span><span style="color: #000000">): </span><span style="color: #267F99">Promise</span><span style="color: #000000">&lt;</span><span style="color: #267F99">string</span><span style="color: #000000">&gt; {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (!</span><span style="color: #001080">user</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">id</span><span style="color: #000000"> = </span><span style="color: #001080">user</span><span style="color: #000000">.</span><span style="color: #001080">id</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">if</span><span style="color: #000000"> (</span><span style="color: #0000FF">typeof</span><span style="color: #000000"> </span><span style="color: #001080">id</span><span style="color: #000000"> !== </span><span style="color: #A31515">&#39;string&#39;</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #A31515">&#39;&#39;</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">result</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #795E26">fetch</span><span style="color: #000000">(</span><span style="color: #A31515">`/api/v0/</span><span style="color: #0000FF">${</span><span style="color: #001080">id</span><span style="color: #0000FF">}</span><span style="color: #A31515">/status`</span><span style="color: #000000">);</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">json</span><span style="color: #000000"> = </span><span style="color: #AF00DB">await</span><span style="color: #000000"> </span><span style="color: #001080">result</span><span style="color: #000000">.</span><span style="color: #795E26">json</span><span style="color: #000000">();</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">json</span><span style="color: #000000">.</span><span style="color: #001080">status</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>Perfect. But, just to make sure, let's require that all changes that introduce a call to <code>getStatus</code> be approved by a senior engineer. That should permanently put a stop to these pesky bugs...</p>
<p>And maybe this time we go a few more days before the next crash. Maybe a few months even. But, unless our code is never changed again, there will be one. If not in this specific function, then somewhere else in our codebase.</p>
<p>To make matters worse, every change now requires: defensively checking for <code>undefined</code>, changing tests or adding new tests, and getting team sign-off. What gives? We're all doing our part and yet there are still bugs! There's got to be a better way.</p>
<h2 id="_identifying-the-hazard" data-needslink="_identifying-the-hazard">Identifying the hazard</h2>
<p>While the bugs in the example above may seem obvious, we were hitting the same type of problems while developing VS Code. Every iteration, we would fix bugs related to an unexpected <code>undefined</code>. And we would add tests. And we would vow to be better engineers. Those are all traditional responses and yet in the next iteration, it would happen all over again. Not only was this causing some users to have a poor experience with VS Code, these bugs and our responses to them were also slowing us down while working on new features or changing existing source code.</p>
<p>We realized that we needed to start understanding our bugs in a new way, not as isolated events but as symptoms/signals of larger problems. Our responses to these bugs and our frustration at not being able to move quickly were also symptoms. When we started discussing the root causes of these symptoms, we found a few common ones:</p>
<ul>
<li>Failure to catch simple programming mistakes, such as accessing properties on <code>null</code> or <code>undefined</code>.</li>
<li>Under-specified interfaces. Which parameters can be <code>undefined</code> or <code>null</code>, and which functions may return <code>undefined</code> or <code>null</code>? Often the implementer of the function was working under a different set of assumptions than the callers.</li>
<li>Type oddities. <code>undefined</code> vs <code>null</code>. <code>undefined</code> vs <code>false</code>. <code>undefined</code> vs empty string.</li>
<li>Feeling that we could not trust the code or safely refactor it.</li>
</ul>
<p>Identifying the root causes was a good first step, but we wanted to go even deeper. What were <a href="https://arlobelshee.com/improving-testing-is-not-safe-a-parable/" class="external-link" target="_blank">the hazards</a> in all these cases that allowed a well meaning engineer to introduce the bug in the first place? And we quickly identified a glaring hazard common to all these issues: the lack of strict null checking in the VS Code codebase.</p>
<p>To understand strict null checking, you have to remember that TypeScript's aim is to add typing to JavaScript. A consequence of TypeScript's JavaScript legacy is that, by default, TypeScript allows <code>undefined</code> and <code>null</code> to be used for any value:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// Without strict null checking, all of these calls are valid</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">); </span><span style="color: #008000">// Ok</span></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #0000FF">null</span><span style="color: #000000">); </span><span style="color: #008000">// Ok</span></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">({ </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> }); </span><span style="color: #008000">// Ok</span></span>
<span class="line"></span></code></pre>
<p>While this flexibility makes it simpler to migrate from JavaScript to TypeScript, the example library for our hypothetical website showed that it is also a hazard. This hazard was also central to the four root causes we had identified working on VS Code (plus many others).</p>
<p>Thankfully though, TypeScript provides an option called <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#--strictNullChecks" class="external-link" target="_blank">strict null checking</a> that causes <code>undefined</code> and <code>null</code> to be treated as distinct types. When using strict null checking, any type that may be nullable must be annotated as such:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// With &quot;strictNullCheck&quot;: true, all of these produce compile errors</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">(</span><span style="color: #0000FF">null</span><span style="color: #000000">); </span><span style="color: #008000">// Error</span></span>
<span class="line"><span style="color: #795E26">getStatus</span><span style="color: #000000">({ </span><span style="color: #001080">id:</span><span style="color: #000000"> </span><span style="color: #0000FF">undefined</span><span style="color: #000000"> }); </span><span style="color: #008000">// Error</span></span>
<span class="line"></span></code></pre>
<p>Fixing isolated lines of code or adding tests was a reactive solution that only fixed those specific bugs. Enabling strict null checking is a proactive solution that not only would fix the bugs we were seeing reported every month, but would also prevent these entire classes of bugs from happening in the future. No more forgetting to check if an optional property has a value. No more questioning if a function can return null or not. The benefits were clear.</p>
<h2 id="_coming-up-with-an-incremental-plan" data-needslink="_coming-up-with-an-incremental-plan">Coming up with an incremental plan</h2>
<p>The problem was that we couldn't just enable a compiler flag and everything would be magically fixed. The core VS Code codebase has some 1800 TypeScript files, comprising more than half a million lines. Compiling it with <code>&quot;strictNullChecks&quot;: true</code> produced some 4500 errors. Ugh!</p>
<p>Furthermore, VS Code is made of a small core team and we like moving fast. Branching off the code to fix those 4500 strict null errors would have added a huge amount of engineering overhead. And where do you even start? Go through the list of errors top to bottom? In addition, changes in a branch would not help main, where the majority of the team would still be working.</p>
<p>We wanted a plan that would incrementally bring the benefits of strict null checking to all engineers on the team, starting right away. That way, we could break the work into manageable changes with each small change making the code a little bit safer.</p>
<p>To do this, we created a new TypeScript project file called <code>tsconfig.strictNullChecks.json</code> that enabled strict null checking and initially consisted of zero files. We then selectively added individual files to this project, fixed the strict null errors in those files, and then checked in the change. As long as we added files that either had no imports or only imported other already strict null checked files, we only had to fix a small number of errors each iteration.</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #000000">{</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;extends&quot;</span><span style="color: #000000">: </span><span style="color: #A31515">&quot;./tsconfig.base.json&quot;</span><span style="color: #000000">, </span><span style="color: #008000">// Shared configuration with our main `tsconfig.json`</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;compilerOptions&quot;</span><span style="color: #000000">: {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;noEmit&quot;</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span><span style="color: #000000">, </span><span style="color: #008000">// Don&#39;t output any javascript</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0451A5">&quot;strictNullChecks&quot;</span><span style="color: #000000">: </span><span style="color: #0000FF">true</span></span>
<span class="line"><span style="color: #000000">  },</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0451A5">&quot;files&quot;</span><span style="color: #000000">: [</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #008000">// Slowly growing list of strict null check files goes here</span></span>
<span class="line"><span style="color: #000000">  ]</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>While this plan seemed reasonable, one issue was that engineers working in main would normally not be compiling the strict null checked subset of VS Code. To prevent accidental regressions to already strict null checked files, we added a continuous integration step that compiled <code>tsconfig.strictNullChecks.json</code>. This ensured that checkins that regressed strict null checking would break the build.</p>
<p>We also put together <a href="https://github.com/mjbvz/vscode-strict-null-check-migration-tools" class="external-link" target="_blank">two simple scripts</a> to automate some of the repetitive tasks related to adding files to the strict null checked project. The first script printed a list of files that were eligible to be strict null checked. A file is considered eligible if it only imports files that were themselves strict null checked. The second script tried to automatically add eligible files to the strict null project. If adding the file caused no compile errors, then it was committed to <code>tsconfig.strictNullChecks.json</code>.</p>
<p>We also considered automating some of the strict null fixes themselves but we ultimately opted against this. Strict null errors are often a good signal that source code should be refactored. Maybe there wasn't a good reason why a type was nullable. Maybe the callers should handle null instead of the implementors. Manually reviewing and fixing these errors gave us a chance to make our code better, instead of brute forcing it to be strict null compatible.</p>
<h2 id="_executing-the-plan" data-needslink="_executing-the-plan">Executing the plan</h2>
<p>Over the next few months, we slowly expanded the number of strict null checked files. This was often tedious work. Most strict null errors were simple: just adding null annotations. For others, it was difficult to understand the intent of the code. Was a value purposefully left uninitialized or is there actually a programming mistake?</p>
<p>In general, we tried to avoid using <a href="https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#non-null-assertion-operator" class="external-link" target="_blank">TypeScript's not-null assertion</a> in our main codebase as much as possible. We did use it more freely in our tests, reasoning that if the lack of null checking in the test code would cause an exception, then the test will fail anyway.</p>
<p>One dispiriting aspect of the whole process was that the total number of strict null errors in the VS Code codebase never seemed to decrease. If anything, if you compiled all of VS Code with strict null checks enabled, all of our strict null work actually seemed to be causing the total number of errors to go up! This is because strict null fixes often have cascading effects. Correctly annotating that a function can return <code>undefined</code> may introduce strict null errors for all consumers of that function. Rather than worrying about the total number of remaining errors, we focused on the number of files that were already strict null checked and worked to ensure that we never regressed this total.</p>
<p>It's also important to note that enabling strict null checking does not magically prevent strict null related exceptions from ever occurring. For example, <code>any</code> types or bad casts can easily bypass strict null checking:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// strictNullCheck: true</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">double</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">): </span><span style="color: #267F99">number</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #098658">2</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">double</span><span style="color: #000000">(</span><span style="color: #0000FF">undefined</span><span style="color: #000000"> </span><span style="color: #AF00DB">as</span><span style="color: #000000"> </span><span style="color: #267F99">any</span><span style="color: #000000">); </span><span style="color: #008000">// not an error</span></span>
<span class="line"></span></code></pre>
<p>as can accessing out of bounds elements in an array:</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// strictNullCheck: true</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">function</span><span style="color: #000000"> </span><span style="color: #795E26">double</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">): </span><span style="color: #267F99">number</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #098658">2</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">const</span><span style="color: #000000"> </span><span style="color: #0070C1">arr</span><span style="color: #000000"> = [</span><span style="color: #098658">1</span><span style="color: #000000">, </span><span style="color: #098658">2</span><span style="color: #000000">, </span><span style="color: #098658">3</span><span style="color: #000000">];</span></span>
<span class="line"></span>
<span class="line"><span style="color: #795E26">double</span><span style="color: #000000">(</span><span style="color: #001080">arr</span><span style="color: #000000">[</span><span style="color: #098658">5</span><span style="color: #000000">]); </span><span style="color: #008000">// not an error</span></span>
<span class="line"></span></code></pre>
<p>Furthermore, unless you also enable TypeScript's strict property initialization, the compiler will not complain if you access a member that is not yet initialized</p>
<pre class="shiki" style="background-color: #FFFFFF"><code><span class="line"><span style="color: #008000">// strictNullCheck: true</span></span>
<span class="line"></span>
<span class="line"><span style="color: #0000FF">class</span><span style="color: #000000"> </span><span style="color: #267F99">Value</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">;</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">setValue</span><span style="color: #000000">(</span><span style="color: #001080">x</span><span style="color: #000000">: </span><span style="color: #267F99">number</span><span style="color: #000000">) {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> = </span><span style="color: #001080">x</span><span style="color: #000000">;</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"></span>
<span class="line"><span style="color: #000000">  </span><span style="color: #0000FF">public</span><span style="color: #000000"> </span><span style="color: #795E26">double</span><span style="color: #000000">(): </span><span style="color: #267F99">number</span><span style="color: #000000"> {</span></span>
<span class="line"><span style="color: #000000">    </span><span style="color: #AF00DB">return</span><span style="color: #000000"> </span><span style="color: #0000FF">this</span><span style="color: #000000">.</span><span style="color: #001080">x</span><span style="color: #000000"> * </span><span style="color: #098658">2</span><span style="color: #000000">; </span><span style="color: #008000">// not an error even though `x` will be `undefined` if `setValue` has not been called yet</span></span>
<span class="line"><span style="color: #000000">  }</span></span>
<span class="line"><span style="color: #000000">}</span></span>
<span class="line"></span></code></pre>
<p>The point of this effort was never to eliminate 100% of the strict null errors in VS Codewhich would be extremely difficult, if not impossiblebut to prevent the vast majority of common strict null related errors. It also was a good chance to clean up our code and make it safer to refactor. Getting 95% of the way there was acceptable for us.</p>
<p>You can find our entire strict null checking plan and its execution <a href="https://github.com/microsoft/vscode/issues/60565" class="external-link" target="_blank">on GitHub</a>. All members of the VS Code team along with many external contributors were involved in this effort. As the driver of this work, I made the most strict null related fixes, but it only took up around a quarter of my engineering time. There was certainly a bit of pain along the way, including some annoyance that many strict null regressions were only caught by continuous integration after checkin. The strict null work also introduced a few new bugs. However, considering the amount of code changed, things went remarkably smoothly.</p>
<p>The <a href="https://github.com/microsoft/vscode/commit/7d0e64f5ec69c1452bcf227692768db45b8d6334#diff-9f6a7f86a587bb89b022817ce9f353f5" class="external-link" target="_blank">change that finally enabled strict null checking</a> for the whole VS Code codebase was rather anti-climactic: it fixed a few more code errors, deleted <code>tsconfig.strictNullChecks.json</code>, and set <code>&quot;strictNullChecks&quot;: true</code> in our main <code>tsconfig</code>. The lack of drama was exactly as planned. And with that, VS Code was strict null checked!</p>
<h2 id="_conclusion" data-needslink="_conclusion">Conclusion</h2>
<p>One common question I hear when telling people about this project is: So how many bugs did it fix? I think that question isn't really meaningful. With VS Code, we never had a problem fixing bugs related to the lack strict null checking. Usually it involved adding a conditional and perhaps a test or two. But we kept seeing the same type of bug over and over and over again. Fixing these bugs was slowing us down unnecessarily and it meant that we couldn't fully trust our code. The lack of strict null checking in our codebase was a hazard and the bugs were only a symptom of this hazard. By enabling strict null checking, we have done significant work to prevent an entire class of bugs, in addition to bringing many other benefits to our codebase and working style.</p>
<p>The point of this post was not to be a tutorial on enabling strict null checking in a large codebase. If this problem does apply to you, hopefully you saw that it is possible to do in a sane way without any magic. (I will add that if you are starting a new TypeScript project, do your future self a favor and start with <code>&quot;strict&quot;: true</code> as the default.)</p>
<p>What I hope you take away is that, far too often, the response to a bug is to either add tests or blame. &quot;Of course Bob should have known to check for undefined before accessing that property.&quot; People mean well but will make mistakes. Tests are useful but also have a cost and only test what we write them to test.</p>
<p>Instead, when you encounter a bug or something else that is slowing you down, rather than rushing in a fix and moving on to the next issue, stop for a moment to really explore what caused it. What was its root cause? What hazards does it reveal? For example, maybe your source code contains a hazardous coding pattern and could use some refactoring. Then work to address the hazard in a way that is proportional to its impact. You don't need to rewrite everything. Do the minimum amount of upfront work required and automate when it makes sense. Reduce hazards and make the world incrementally better today.</p>
<p>We took this approach with strict null checking VS Code, and will apply it to other problems in the future. I hope you find it useful as well, no matter what type of project you are working on.</p>
<p>Happy Coding,</p>
<p>Matt Bierner, VS Code Team Member
<a href="https://twitter.com/mattbierner" class="external-link" target="_blank">@mattbierner</a></p>

        </div>
        <div class="col-sm-3 col-md-2 docs-subnavbar-container">
            <nav id="docs-subnavbar" aria-label="On Page" data-spy="affix" data-offset-top="20">
                
                <h4><span class="sr-only">In this blog post, there are 6
                        sections</span><span aria-hidden="true">In this blog post</span></h4>
                
                <ul class="nav">
                    
                    <li><a href="#_safety-permits-speed">Safety permits speed</a></li>
                    
                    <li><a href="#_an-example">An example</a></li>
                    
                    <li><a href="#_identifying-the-hazard">Identifying the hazard</a></li>
                    
                    <li><a href="#_coming-up-with-an-incremental-plan">Coming up with an incremental plan</a></li>
                    
                    <li><a href="#_executing-the-plan">Executing the plan</a></li>
                    
                    <li><a href="#_conclusion">Conclusion</a></li>
                    
                </ul>
                <div class="connect-widget"></div>
            </nav>
        </div>
    </div>
</div>
      </div>
  </div>

  <footer role="contentinfo">
      <div class="container">
          <div class="row">
              <div class="left col-md-7">
                  <ul class="links">
                      <li>
                          <span class="message">Hello from Seattle.</span>
                      </li>
                      <li>
                          <a href="https://go.microsoft.com/fwlink/?LinkID=533687" onclick="followOnTwitter()" tabindex="0">Follow @code</a>
                      </li>
                      <li>
                          <div class="github-star-button">
                              <iframe src="../../../../assets/github-button29be.html?user=Microsoft&amp;repo=vscode&amp;type=star&amp;count=true"
                                  frameborder="0" scrolling="0" width="130px" height="20px" title="GitHub follow button" loading="lazy"></iframe>
                          </div>
                      </li>
  
                      <script>
                          function followOnTwitter() {
                              var windowFeatures = "location=yes,height=600,width=550,scrollbars=yes,status=yes";
                              var originalReferer = "&original_referer=" + document.URL;
                              var screenName = "&screen_name=code";
                              var URL = "https://twitter.com/intent/follow?" + originalReferer + screenName;
                              window.open(URL, "_blank", windowFeatures);
                          }
  
                          function manageConsent() {
                              if(WcpConsent.siteConsent.isConsentRequired){
                                  WcpConsent.siteConsent.manageConsent();
                              }
                          }
                      </script>
                  </ul>
              </div>
              <div class="right col-md-5">
                  <ul class="links">
                      <li><a id="footer-support-link" href="https://support.serviceshub.microsoft.com/supportforbusiness/create?sapId=d66407ed-3967-b000-4cfb-2c318cad363d"
                              target="_blank">Support</a></li>
                      <li><a id="footer-privacy-link" href="https://privacy.microsoft.com/privacystatement"
                              target="_blank">Privacy</a></li>
                      <li style="display: none;"><a id="footer-cookie-link" style="cursor: pointer;" onclick="manageConsent()"
                              target="_blank">Manage Cookies</a></li>
                      <li><a id="footer-terms-link" href="https://www.microsoft.com/legal/terms-of-use"
                              target="_blank">Terms of Use</a></li>
                      <li><a id="footer-license-link" href="../../../../License.html">License</a></li>
                  </ul>
                  <div class="copyright">
                      <a id="footer-microsoft-link" class="logo" href="https://www.microsoft.com/">
                          <img class="microsoft-logo" src="../../../../assets/images/microsoft-logo.png" height="20" alt="Microsoft homepage"/>
                          <img class="microsoft-logo-inverted" src="../../../../assets/images/microsoft-logo-inverted.png" height="20" alt="Microsoft homepage" />
                      </a>
                      <span>&copy; 2023 Microsoft</span>
                  </div>
              </div>
          </div>
      </div>
  </footer>
  <script src="../../../../dist/index.js"></script>

  

  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "SoftwareApplication",
      "name" : "Visual Studio Code",
      "softwareVersion": "1.74",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "applicationCategory": "DeveloperApplication",
      "applicationSubCategory": "Text Editor",
      "alternateName": "VS Code",
      "datePublished": "2021-11-03",
      "operatingSystem": "Mac, Linux, Windows",
      "logo": "https://code.visualstudio.com/assets/apple-touch-icon.png",
      "screenshot": "https://code.visualstudio.com/assets/home/home-screenshot-win.png",
      "releaseNotes": "https://code.visualstudio.com/updates",
      "downloadUrl": "https://code.visualstudio.com/download",
      "license": "https://code.visualstudio.com/license",
      "softwareRequirements": "https://code.visualstudio.com/docs/supporting/requirements",
      "url" : "https://code.visualstudio.com",
      "author": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "publisher": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "maintainer": {
        "@type": "Organization",
        "name": "Microsoft"
      },
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://code.visualstudio.com/Search?q={search_term_string}",
        "query-input": "required name=search_term_string"
      },
      "sameAs" : [
        "https://en.wikipedia.org/wiki/Visual_Studio_Code",
        "https://twitter.com/code",
        "https://www.youtube.com/code",
        "https://www.tiktok.com/@vscode",
        "https://github.com/microsoft/vscode"
      ]
    }
  </script>
</body>

<!-- Mirrored from code.visualstudio.com/blogs/2019/05/23/strict-null by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 04 Jan 2023 12:15:16 GMT -->
</html>